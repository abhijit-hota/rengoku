const Ul=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function l(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=l(i);fetch(i.href,o)}};Ul();function O(){}function ye(t,e){for(const l in e)t[l]=e[l];return t}function Pl(t){return t&&typeof t=="object"&&typeof t.then=="function"}function $t(t){return t()}function gt(){return Object.create(null)}function ue(t){t.forEach($t)}function ft(t){return typeof t=="function"}function he(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let Ze;function nt(t,e){return Ze||(Ze=document.createElement("a")),Ze.href=e,t===Ze.href}function Fl(t){return Object.keys(t).length===0}function el(t,...e){if(t==null)return O;const l=t.subscribe(...e);return l.unsubscribe?()=>l.unsubscribe():l}function Re(t,e,l){t.$$.on_destroy.push(el(e,l))}function Ye(t,e,l,n){if(t){const i=tl(t,e,l,n);return t[0](i)}}function tl(t,e,l,n){return t[1]&&n?ye(l.ctx.slice(),t[1](n(e))):l.ctx}function Ke(t,e,l,n){if(t[2]&&n){const i=t[2](n(l));if(e.dirty===void 0)return i;if(typeof i=="object"){const o=[],s=Math.max(e.dirty.length,i.length);for(let u=0;u<s;u+=1)o[u]=e.dirty[u]|i[u];return o}return e.dirty|i}return e.dirty}function Je(t,e,l,n,i,o){if(i){const s=tl(e,l,n,o);t.p(s,i)}}function Qe(t){if(t.ctx.length>32){const e=[],l=t.ctx.length/32;for(let n=0;n<l;n++)e[n]=-1;return e}return-1}function Ne(t){const e={};for(const l in t)l[0]!=="$"&&(e[l]=t[l]);return e}function Ie(t){return t==null?"":t}function Ve(t,e,l){return t.set(l),e}const ll=typeof window!="undefined";let bt=ll?()=>window.performance.now():()=>Date.now(),nl=ll?t=>requestAnimationFrame(t):O;const ze=new Set;function il(t){ze.forEach(e=>{e.c(t)||(ze.delete(e),e.f())}),ze.size!==0&&nl(il)}function Hl(t){let e;return ze.size===0&&nl(il),{promise:new Promise(l=>{ze.add(e={c:t,f:l})}),abort(){ze.delete(e)}}}function c(t,e){t.appendChild(e)}function q(t,e,l){t.insertBefore(e,l||null)}function L(t){t.parentNode.removeChild(t)}function Oe(t,e){for(let l=0;l<t.length;l+=1)t[l]&&t[l].d(e)}function m(t){return document.createElement(t)}function De(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function fe(t){return document.createTextNode(t)}function A(){return fe(" ")}function We(){return fe("")}function I(t,e,l,n){return t.addEventListener(e,l,n),()=>t.removeEventListener(e,l,n)}function Te(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function Vl(t){return function(e){e.target===this&&t.call(this,e)}}function a(t,e,l){l==null?t.removeAttribute(e):t.getAttribute(e)!==l&&t.setAttribute(e,l)}function Ue(t,e){for(const l in e)a(t,l,e[l])}function Gl(t){return Array.from(t.childNodes)}function pe(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function _e(t,e){t.value=e==null?"":e}function ne(t,e,l,n){l===null?t.style.removeProperty(e):t.style.setProperty(e,l,n?"important":"")}function pt(t,e){for(let l=0;l<t.options.length;l+=1){const n=t.options[l];if(n.__value===e){n.selected=!0;return}}t.selectedIndex=-1}function Yl(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}function ie(t,e,l){t.classList[l?"add":"remove"](e)}function Kl(t,e,{bubbles:l=!1,cancelable:n=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(t,l,n,e),i}let Ge;function Ae(t){Ge=t}function at(){if(!Ge)throw new Error("Function called outside component initialization");return Ge}function ct(t){at().$$.on_mount.push(t)}function Jl(){const t=at();return(e,l,{cancelable:n=!1}={})=>{const i=t.$$.callbacks[e];if(i){const o=Kl(e,l,{cancelable:n});return i.slice().forEach(s=>{s.call(t,o)}),!o.defaultPrevented}return!0}}function vt(t,e){const l=t.$$.callbacks[e.type];l&&l.slice().forEach(n=>n.call(this,e))}const Fe=[],je=[],xe=[],it=[],sl=Promise.resolve();let st=!1;function ol(){st||(st=!0,sl.then(_t))}function Ql(){return ol(),sl}function et(t){xe.push(t)}function dt(t){it.push(t)}const lt=new Set;let Xe=0;function _t(){const t=Ge;do{for(;Xe<Fe.length;){const e=Fe[Xe];Xe++,Ae(e),Wl(e.$$)}for(Ae(null),Fe.length=0,Xe=0;je.length;)je.pop()();for(let e=0;e<xe.length;e+=1){const l=xe[e];lt.has(l)||(lt.add(l),l())}xe.length=0}while(Fe.length);for(;it.length;)it.pop()();st=!1,lt.clear(),Ae(t)}function Wl(t){if(t.fragment!==null){t.update(),ue(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(et)}}const $e=new Set;let Ee;function ge(){Ee={r:0,c:[],p:Ee}}function be(){Ee.r||ue(Ee.c),Ee=Ee.p}function j(t,e){t&&t.i&&($e.delete(t),t.i(e))}function P(t,e,l,n){if(t&&t.o){if($e.has(t))return;$e.add(t),Ee.c.push(()=>{$e.delete(t),n&&(l&&t.d(1),n())}),t.o(e)}}function ot(t,e){const l=e.token={};function n(i,o,s,u){if(e.token!==l)return;e.resolved=u;let r=e.ctx;s!==void 0&&(r=r.slice(),r[s]=u);const f=i&&(e.current=i)(r);let _=!1;e.block&&(e.blocks?e.blocks.forEach((k,S)=>{S!==o&&k&&(ge(),P(k,1,1,()=>{e.blocks[S]===k&&(e.blocks[S]=null)}),be())}):e.block.d(1),f.c(),j(f,1),f.m(e.mount(),e.anchor),_=!0),e.block=f,e.blocks&&(e.blocks[o]=f),_&&_t()}if(Pl(t)){const i=at();if(t.then(o=>{Ae(i),n(e.then,1,e.value,o),Ae(null)},o=>{if(Ae(i),n(e.catch,2,e.error,o),Ae(null),!e.hasCatch)throw o}),e.current!==e.pending)return n(e.pending,0),!0}else{if(e.current!==e.then)return n(e.then,1,e.value,t),!0;e.resolved=t}}function rt(t,e,l){const n=e.slice(),{resolved:i}=t;t.current===t.then&&(n[t.value]=i),t.current===t.catch&&(n[t.error]=i),t.block.p(n,l)}function mt(t,e){const l={},n={},i={$$scope:1};let o=t.length;for(;o--;){const s=t[o],u=e[o];if(u){for(const r in s)r in u||(n[r]=1);for(const r in u)i[r]||(l[r]=u[r],i[r]=1);t[o]=u}else for(const r in s)i[r]=1}for(const s in n)s in l||(l[s]=void 0);return l}function ht(t,e,l){const n=t.$$.props[e];n!==void 0&&(t.$$.bound[n]=l,l(t.$$.ctx[n]))}function me(t){t&&t.c()}function ce(t,e,l,n){const{fragment:i,on_mount:o,on_destroy:s,after_update:u}=t.$$;i&&i.m(e,l),n||et(()=>{const r=o.map($t).filter(ft);s?s.push(...r):ue(r),t.$$.on_mount=[]}),u.forEach(et)}function de(t,e){const l=t.$$;l.fragment!==null&&(ue(l.on_destroy),l.fragment&&l.fragment.d(e),l.on_destroy=l.fragment=null,l.ctx=[])}function Zl(t,e){t.$$.dirty[0]===-1&&(Fe.push(t),ol(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ve(t,e,l,n,i,o,s,u=[-1]){const r=Ge;Ae(t);const f=t.$$={fragment:null,ctx:null,props:o,update:O,not_equal:i,bound:gt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(r?r.$$.context:[])),callbacks:gt(),dirty:u,skip_bound:!1,root:e.target||r.$$.root};s&&s(f.root);let _=!1;if(f.ctx=l?l(t,e.props||{},(k,S,...g)=>{const b=g.length?g[0]:S;return f.ctx&&i(f.ctx[k],f.ctx[k]=b)&&(!f.skip_bound&&f.bound[k]&&f.bound[k](b),_&&Zl(t,k)),S}):[],f.update(),_=!0,ue(f.before_update),f.fragment=n?n(f.ctx):!1,e.target){if(e.hydrate){const k=Gl(e.target);f.fragment&&f.fragment.l(k),k.forEach(L)}else f.fragment&&f.fragment.c();e.intro&&j(t.$$.fragment),ce(t,e.target,e.anchor,e.customElement),_t()}Ae(r)}class ke{$destroy(){de(this,1),this.$destroy=O}$on(e,l){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(l),()=>{const i=n.indexOf(l);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!Fl(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const qe=[];function Xl(t,e){return{subscribe:tt(t,e).subscribe}}function tt(t,e=O){let l;const n=new Set;function i(u){if(he(t,u)&&(t=u,l)){const r=!qe.length;for(const f of n)f[1](),qe.push(f,t);if(r){for(let f=0;f<qe.length;f+=2)qe[f][0](qe[f+1]);qe.length=0}}}function o(u){i(u(t))}function s(u,r=O){const f=[u,r];return n.add(f),n.size===1&&(l=e(i)||O),u(t),()=>{n.delete(f),n.size===0&&(l(),l=null)}}return{set:i,update:o,subscribe:s}}function xl(t,e,l){const n=!Array.isArray(t),i=n?[t]:t,o=e.length<2;return Xl(l,s=>{let u=!1;const r=[];let f=0,_=O;const k=()=>{if(f)return;_();const g=e(n?r[0]:r,s);o?s(g):_=ft(g)?g:O},S=i.map((g,b)=>el(g,h=>{r[b]=h,f&=~(1<<b),u&&k()},()=>{f|=1<<b}));return u=!0,k(),function(){ue(S),_()}})}const $l="http://localhost:8080";async function Se(t,e="GET",l=null){const n=await fetch($l+"/api"+t,{method:e,body:l?JSON.stringify(l):null});if(!n.ok)throw new Error(n.statusText);return await n.json()}const ae=tt({sortBy:"date",order:"asc",folder:"",tags:[],search:"",page:0}),en=xl(ae,t=>{const e=[];if(t.sortBy&&t.order){const l=`sort_by=${t.sortBy}&order=${t.order}`;e.push(l)}if(t.folder){const l=`folder=${t.folder}`;e.push(l)}if(t.search){const l=`search=${t.search}`;e.push(l)}if(t.tags.length>0){const n=t.tags.map(i=>`tags[]=${i}`).join("&");e.push(n)}return e.push(`page=${t.page}`),"?"+e.join("&")}),tn=()=>{const{set:t,subscribe:e,update:l}=tt([]);return{subscribe:e,fetch:async n=>{try{const i=await Se("/bookmarks"+n);t(i.data),l(o=>[...o,...i.data.filter(({id:s})=>!o.find(({id:u})=>u===s))])}catch{return t([])}},add:(...n)=>{l(i=>[...i,...n])},delete:n=>{l(i=>{const o=i.findIndex(s=>s.id===n);return i.splice(o,1),i})}}},He=tn();var ln="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAWQAAAFkBqp2phgAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAABBSURBVDiNY2DADbwZGBieMDAwPGZgYPDEow4neMzAwPAfih/hUsREjsnEAk+oKx4xMDB40NIi2oHRWBgMYKTEAgDk8RljTFG0oAAAAABJRU5ErkJggg==";function kt(t,e,l){const n=t.slice();return n[7]=e[l],n}function wt(t){let e,l;return{c(){e=m("img"),a(e,"class","favicon svelte-1ttynm1"),nt(e.src,l=t[0].meta.favicon)||a(e,"src",l),a(e,"alt","Favicon")},m(n,i){q(n,e,i)},p(n,i){i&1&&!nt(e.src,l=n[0].meta.favicon)&&a(e,"src",l)},d(n){n&&L(e)}}}function yt(t){let e,l,n,i,o,s,u,r,f;return{c(){e=m("button"),l=m("img"),i=A(),o=m("input"),nt(l.src,n=ln)||a(l,"src",n),a(l,"alt","Menu"),ne(l,"filter","invert(1)"),ne(l,"transform","rotate(90deg)"),a(e,"class","icon-button"),a(o,"type","checkbox"),a(o,"name",s=t[0].id),a(o,"id",u=t[0].id),a(o,"class","bookmark-checkbox svelte-1ttynm1")},m(_,k){q(_,e,k),c(e,l),q(_,i,k),q(_,o,k),o.checked=t[2],r||(f=[I(e,"click",t[3]),I(o,"change",t[6])],r=!0)},p(_,k){k&1&&s!==(s=_[0].id)&&a(o,"name",s),k&1&&u!==(u=_[0].id)&&a(o,"id",u),k&4&&(o.checked=_[2])},d(_){_&&L(e),_&&L(i),_&&L(o),r=!1,ue(f)}}}function At(t){let e,l=t[0].meta.description+"",n;return{c(){e=m("p"),n=fe(l)},m(i,o){q(i,e,o),c(e,n)},p(i,o){o&1&&l!==(l=i[0].meta.description+"")&&pe(n,l)},d(i){i&&L(e)}}}function St(t){let e,l,n=t[0].tags,i=[];for(let o=0;o<n.length;o+=1)i[o]=Ct(kt(t,n,o));return{c(){e=m("div"),l=m("div");for(let o=0;o<i.length;o+=1)i[o].c();a(l,"class","tags svelte-1ttynm1"),a(e,"class","footer row")},m(o,s){q(o,e,s),c(e,l);for(let u=0;u<i.length;u+=1)i[u].m(l,null)},p(o,s){if(s&1){n=o[0].tags;let u;for(u=0;u<n.length;u+=1){const r=kt(o,n,u);i[u]?i[u].p(r,s):(i[u]=Ct(r),i[u].c(),i[u].m(l,null))}for(;u<i.length;u+=1)i[u].d(1);i.length=n.length}},d(o){o&&L(e),Oe(i,o)}}}function Ct(t){let e,l=t[7].name+"",n;return{c(){e=m("div"),n=fe(l),a(e,"class","tag svelte-1ttynm1")},m(i,o){q(i,e,o),c(e,n)},p(i,o){o&1&&l!==(l=i[7].name+"")&&pe(n,l)},d(i){i&&L(e)}}}function nn(t){let e,l,n,i,o=t[0].meta.title+"",s,u,r,f,_,k,S=t[0].url+"",g,b,h,p,w,B,R,T=t[0].meta.favicon&&wt(t),M=t[1]&&yt(t),G=t[0].meta.description&&At(t),F=t[0].tags.length>0&&St(t);return{c(){e=m("div"),l=m("div"),T&&T.c(),n=A(),i=m("h3"),s=fe(o),u=A(),r=m("div"),M&&M.c(),f=A(),_=m("small"),k=m("a"),g=fe(S),h=A(),G&&G.c(),p=A(),F&&F.c(),ne(i,"text-overflow","ellipsis"),a(i,"class","svelte-1ttynm1"),a(r,"class","m-l-auto"),a(l,"class","row header-row"),a(k,"href",b=t[0].url),a(_,"class","svelte-1ttynm1"),a(e,"class",w=Ie(`bookmark ${t[2]||t[1]?"active":""}`)+" svelte-1ttynm1")},m(y,z){q(y,e,z),c(e,l),T&&T.m(l,null),c(l,n),c(l,i),c(i,s),c(l,u),c(l,r),M&&M.m(r,null),c(e,f),c(e,_),c(_,k),c(k,g),c(e,h),G&&G.m(e,null),c(e,p),F&&F.m(e,null),B||(R=[I(e,"mouseover",t[4]),I(e,"focus",t[4]),I(e,"mouseout",t[5]),I(e,"blur",t[5])],B=!0)},p(y,[z]){y[0].meta.favicon?T?T.p(y,z):(T=wt(y),T.c(),T.m(l,n)):T&&(T.d(1),T=null),z&1&&o!==(o=y[0].meta.title+"")&&pe(s,o),y[1]?M?M.p(y,z):(M=yt(y),M.c(),M.m(r,null)):M&&(M.d(1),M=null),z&1&&S!==(S=y[0].url+"")&&pe(g,S),z&1&&b!==(b=y[0].url)&&a(k,"href",b),y[0].meta.description?G?G.p(y,z):(G=At(y),G.c(),G.m(e,p)):G&&(G.d(1),G=null),y[0].tags.length>0?F?F.p(y,z):(F=St(y),F.c(),F.m(e,null)):F&&(F.d(1),F=null),z&6&&w!==(w=Ie(`bookmark ${y[2]||y[1]?"active":""}`)+" svelte-1ttynm1")&&a(e,"class",w)},i:O,o:O,d(y){y&&L(e),T&&T.d(),M&&M.d(),G&&G.d(),F&&F.d(),B=!1,ue(R)}}}function sn(t,e,l){let{bookmark:n}=e,i=!1,o=!1;const s=async()=>{try{const _=await Se("/bookmarks/"+n.id,"DELETE");He.delete(n.id)}catch(_){console.debug(_)}},u=()=>{l(1,i=!0)},r=()=>{o||l(1,i=!1)};function f(){o=this.checked,l(2,o)}return t.$$set=_=>{"bookmark"in _&&l(0,n=_.bookmark)},[n,i,o,s,u,r,f]}class on extends ke{constructor(e){super(),ve(this,e,sn,nn,he,{bookmark:0})}}function Ot(t,e,l){const n=t.slice();return n[11]=e[l],n}function Tt(t){let e,l=t[11].name+"",n,i,o,s,u;function r(){return t[9](t[11])}return{c(){e=m("div"),n=fe(l),i=A(),a(e,"class","tag svelte-b7qtbs"),a(e,"role","checkbox"),a(e,"style",o=`opacity: ${t[1].tags.includes(t[11].id)?1:.5}`)},m(f,_){q(f,e,_),c(e,n),c(e,i),s||(u=I(e,"click",r),s=!0)},p(f,_){t=f,_&1&&l!==(l=t[11].name+"")&&pe(n,l),_&3&&o!==(o=`opacity: ${t[1].tags.includes(t[11].id)?1:.5}`)&&a(e,"style",o)},d(f){f&&L(e),s=!1,u()}}}function rn(t){let e,l,n,i,o,s,u,r,f,_,k,S,g,b,h,p,w,B,R,T,M,G,F,y,z,H,x,J,Y,V,K,Z,ee,E,N,D,le,$,v,C,se,Q,oe=t[0],te=[];for(let U=0;U<oe.length;U+=1)te[U]=Tt(Ot(t,oe,U));return{c(){e=m("input"),l=A(),n=m("div"),i=m("div"),o=m("strong"),o.textContent="SORT BY",s=A(),u=m("div"),r=m("input"),f=A(),_=m("label"),_.textContent="Title",k=A(),S=m("div"),g=m("input"),b=A(),h=m("label"),h.textContent="Date",p=A(),w=m("div"),B=m("strong"),B.textContent="ORDER",R=A(),T=m("div"),M=m("input"),G=A(),F=m("label"),F.textContent="Ascending",y=A(),z=m("div"),H=m("input"),x=A(),J=m("label"),J.textContent="Descending",Y=A(),V=m("div"),K=m("strong"),K.textContent="FILTER BY TAGS",Z=A(),ee=m("button"),E=fe("Clear"),D=A(),le=m("div");for(let U=0;U<te.length;U+=1)te[U].c();$=A(),v=m("div"),C=m("button"),C.textContent="Open Settings",a(e,"type","text"),a(e,"id","search"),a(e,"name","search"),a(e,"placeholder","Search"),a(e,"class","m-b-2"),a(r,"type","radio"),a(r,"name","sortBy"),a(r,"id","title"),r.__value="title",r.value=r.__value,a(r,"class","svelte-b7qtbs"),t[4][0].push(r),a(_,"for","title"),a(g,"type","radio"),a(g,"name","sortBy"),a(g,"id","date"),g.__value="date",g.value=g.__value,a(g,"class","svelte-b7qtbs"),t[4][0].push(g),a(h,"for","date"),a(i,"class","col"),a(M,"type","radio"),a(M,"name","order"),a(M,"id","asc"),M.__value="asc",M.value=M.__value,a(M,"class","svelte-b7qtbs"),t[4][1].push(M),a(F,"for","asc"),a(H,"type","radio"),a(H,"name","order"),a(H,"id","desc"),H.__value="desc",H.value=H.__value,a(H,"class","svelte-b7qtbs"),t[4][1].push(H),a(J,"for","desc"),a(w,"class","col m-l-auto"),a(n,"class","row m-b-2"),a(ee,"class","m-l-auto"),ee.disabled=N=t[1].tags.length===0,a(V,"class","row"),a(le,"id","tags"),a(le,"class","m-b-2 svelte-b7qtbs"),a(C,"class","w-full")},m(U,X){q(U,e,X),_e(e,t[1].search),q(U,l,X),q(U,n,X),c(n,i),c(i,o),c(i,s),c(i,u),c(u,r),r.checked=r.__value===t[1].sortBy,c(u,f),c(u,_),c(i,k),c(i,S),c(S,g),g.checked=g.__value===t[1].sortBy,c(S,b),c(S,h),c(n,p),c(n,w),c(w,B),c(w,R),c(w,T),c(T,M),M.checked=M.__value===t[1].order,c(T,G),c(T,F),c(w,y),c(w,z),c(z,H),H.checked=H.__value===t[1].order,c(z,x),c(z,J),q(U,Y,X),q(U,V,X),c(V,K),c(V,Z),c(V,ee),c(ee,E),q(U,D,X),q(U,le,X);for(let re=0;re<te.length;re+=1)te[re].m(le,null);q(U,$,X),q(U,v,X),c(v,C),se||(Q=[I(e,"input",t[2]),I(r,"change",t[3]),I(g,"change",t[5]),I(M,"change",t[6]),I(H,"change",t[7]),I(ee,"click",t[8]),I(C,"click",t[10])],se=!0)},p(U,[X]){if(X&2&&e.value!==U[1].search&&_e(e,U[1].search),X&2&&(r.checked=r.__value===U[1].sortBy),X&2&&(g.checked=g.__value===U[1].sortBy),X&2&&(M.checked=M.__value===U[1].order),X&2&&(H.checked=H.__value===U[1].order),X&2&&N!==(N=U[1].tags.length===0)&&(ee.disabled=N),X&3){oe=U[0];let re;for(re=0;re<oe.length;re+=1){const Be=Ot(U,oe,re);te[re]?te[re].p(Be,X):(te[re]=Tt(Be),te[re].c(),te[re].m(le,null))}for(;re<te.length;re+=1)te[re].d(1);te.length=oe.length}},i:O,o:O,d(U){U&&L(e),U&&L(l),U&&L(n),t[4][0].splice(t[4][0].indexOf(r),1),t[4][0].splice(t[4][0].indexOf(g),1),t[4][1].splice(t[4][1].indexOf(M),1),t[4][1].splice(t[4][1].indexOf(H),1),U&&L(Y),U&&L(V),U&&L(D),U&&L(le),Oe(te,U),U&&L($),U&&L(v),se=!1,ue(Q)}}}function un(t,e,l){let n;Re(t,ae,b=>l(1,n=b));let i=[];ct(async()=>{try{l(0,i=await Se("/tags"))}catch(b){console.debug(b)}});const o=[[],[]];function s(){n.search=this.value,ae.set(n)}function u(){n.sortBy=this.__value,ae.set(n)}function r(){n.sortBy=this.__value,ae.set(n)}function f(){n.order=this.__value,ae.set(n)}function _(){n.order=this.__value,ae.set(n)}return[i,n,s,u,o,r,f,_,()=>{Ve(ae,n.tags=[],n)},b=>{const h=n.tags;if(h.includes(b.id)){const p=h.indexOf(b);h.splice(p,1)}else h.push(b.id);Ve(ae,n.tags=h,n)},()=>{document.getElementById("settings").showModal()}]}class fn extends ke{constructor(e){super(),ve(this,e,un,rn,he,{})}}function Bt(t,e,l){const n=t.slice();return n[5]=e[l],n[6]=e,n[7]=l,n}function Mt(t){let e,l,n,i,o,s,u,r,f,_,k,S,g,b,h,p,w,B,R,T,M,G,F,y,z,H,x,J,Y,V,K,Z,ee;function E(){t[2].call(u,t[6],t[7])}function N(){t[3].call(b,t[6],t[7])}function D(){t[4].call(y,t[6],t[7])}return{c(){e=m("div"),l=m("div"),n=m("div"),i=m("label"),i.textContent="Pattern",s=A(),u=m("input"),f=A(),_=m("div"),k=m("label"),k.textContent="Match detection",g=A(),b=m("select"),h=m("option"),h.textContent="Starts with (default)",p=m("option"),p.textContent="Regex",w=m("option"),w.textContent="Origin",B=m("option"),B.textContent="Domain",M=A(),G=m("div"),F=m("div"),y=m("input"),x=A(),J=m("label"),J.textContent="Save offline",Y=A(),V=m("hr"),K=A(),a(i,"for",o="pattern"+t[7]),a(u,"type","text"),a(u,"id",r="pattern"+t[7]),u.readOnly=!0,u.disabled=!0,a(n,"class","col"),ne(n,"flex-grow","3"),a(k,"for",S="matchDetection"+t[7]),h.__value="starts_with",h.value=h.__value,p.__value="regex",p.value=p.__value,w.__value="origin",w.value=w.__value,B.__value="domain",B.value=B.__value,a(b,"id",R="matchDetection"+t[7]),a(b,"name",T="matchDetection"+t[7]),t[5].matchDetection===void 0&&et(N),a(_,"class","col"),a(l,"class","row w-100"),a(y,"type","checkbox"),a(y,"id",z="saveOffline"+t[7]),a(y,"name",H="saveOffline"+t[7]),a(J,"for","'saveOffline' + i"),a(F,"class","row"),a(G,"class","row"),a(e,"class","url-action m-b-2 svelte-19q94so")},m(le,$){q(le,e,$),c(e,l),c(l,n),c(n,i),c(n,s),c(n,u),_e(u,t[5].pattern),c(l,f),c(l,_),c(_,k),c(_,g),c(_,b),c(b,h),c(b,p),c(b,w),c(b,B),pt(b,t[5].matchDetection),c(e,M),c(e,G),c(G,F),c(F,y),_e(y,t[5].shouldSaveOffline),c(F,x),c(F,J),c(e,Y),c(e,V),c(e,K),Z||(ee=[I(u,"input",E),I(b,"change",N),I(y,"change",D)],Z=!0)},p(le,$){t=le,$&1&&u.value!==t[5].pattern&&_e(u,t[5].pattern),$&1&&pt(b,t[5].matchDetection),$&1&&_e(y,t[5].shouldSaveOffline)},d(le){le&&L(e),Z=!1,ue(ee)}}}function an(t){let e,l,n,i,o,s,u,r,f,_,k,S,g,b,h,p=t[0].urlActions,w=[];for(let B=0;B<p.length;B+=1)w[B]=Mt(Bt(t,p,B));return{c(){e=m("dialog"),l=m("header"),l.innerHTML="<h2>Settings</h2>",n=A(),i=m("div"),o=m("div"),s=m("h3"),s.textContent="Save pages offline",u=A(),r=m("input"),f=A(),_=m("h3"),_.textContent="URL Actions",k=A(),S=m("hr"),g=A();for(let B=0;B<w.length;B+=1)w[B].c();a(r,"class","m-l-auto"),a(r,"type","checkbox"),a(r,"name","saveOfflineDefault"),a(r,"id","saveOfflineDefault"),a(o,"class","row m-b-2"),a(i,"class","col"),ne(i,"width","600px"),ne(i,"max-height","700px"),a(e,"id","settings")},m(B,R){q(B,e,R),c(e,l),c(e,n),c(e,i),c(i,o),c(o,s),c(o,u),c(o,r),r.checked=t[0].shouldSaveOffline,c(i,f),c(i,_),c(i,k),c(i,S),c(i,g);for(let T=0;T<w.length;T+=1)w[T].m(i,null);b||(h=I(r,"change",t[1]),b=!0)},p(B,[R]){if(R&1&&(r.checked=B[0].shouldSaveOffline),R&1){p=B[0].urlActions;let T;for(T=0;T<p.length;T+=1){const M=Bt(B,p,T);w[T]?w[T].p(M,R):(w[T]=Mt(M),w[T].c(),w[T].m(i,null))}for(;T<w.length;T+=1)w[T].d(1);w.length=p.length}},i:O,o:O,d(B){B&&L(e),Oe(w,B),b=!1,h()}}}function cn(t,e,l){let n={shouldSaveOffline:null,urlActions:[]};ct(async()=>{l(0,n=await Se("/config"))});function i(){n.shouldSaveOffline=this.checked,l(0,n)}function o(r,f){r[f].pattern=this.value,l(0,n)}function s(r,f){r[f].matchDetection=Yl(this),l(0,n)}function u(r,f){r[f].shouldSaveOffline=this.value,l(0,n)}return[n,i,o,s,u]}class dn extends ke{constructor(e){super(),ve(this,e,cn,an,he,{})}}function _n(t){let e,l=`${t[0]} transparent ${t[0]}
  ${t[0]}`;return{c(){e=m("div"),ne(e,"--duration",t[1]),a(e,"class","svelte-66wdl1"),ne(e,"border-color",l,!1),ne(e,"width",t[2],!1),ne(e,"height",t[2],!1)},m(n,i){q(n,e,i)},p(n,[i]){i&2&&ne(e,"--duration",n[1]),i&1&&l!==(l=`${n[0]} transparent ${n[0]}
  ${n[0]}`)&&ne(e,"border-color",l,!1),i&4&&ne(e,"width",n[2],!1),i&4&&ne(e,"height",n[2],!1)},i:O,o:O,d(n){n&&L(e)}}}function mn(t,e,l){let{color:n="cornflowerblue"}=e,{duration:i="1.5s"}=e,{size:o="1em"}=e;return t.$$set=s=>{"color"in s&&l(0,n=s.color),"duration"in s&&l(1,i=s.duration),"size"in s&&l(2,o=s.size)},[n,i,o]}class hn extends ke{constructor(e){super(),ve(this,e,mn,_n,he,{color:0,duration:1,size:2})}}function gn(t){let e,l,n=[t[0],{fill:"currentColor"},{viewBox:"0 0 16 16"}],i={};for(let o=0;o<n.length;o+=1)i=ye(i,n[o]);return{c(){e=De("svg"),l=De("path"),a(l,"d","M3.646 9.146a.5.5 0 0 1 .708 0L8 12.793l3.646-3.647a.5.5 0 0 1 .708.708l-4 4a.5.5 0 0 1-.708 0l-4-4a.5.5 0 0 1 0-.708zm0-2.292a.5.5 0 0 0 .708 0L8 3.207l3.646 3.647a.5.5 0 0 0 .708-.708l-4-4a.5.5 0 0 0-.708 0l-4 4a.5.5 0 0 0 0 .708z"),Ue(e,i)},m(o,s){q(o,e,s),c(e,l)},p(o,[s]){Ue(e,i=mt(n,[s&1&&o[0],{fill:"currentColor"},{viewBox:"0 0 16 16"}]))},i:O,o:O,d(o){o&&L(e)}}}function bn(t,e,l){return t.$$set=n=>{l(0,e=ye(ye({},e),Ne(n)))},e=Ne(e),[e]}class pn extends ke{constructor(e){super(),ve(this,e,bn,gn,he,{})}}function vn(t){let e,l,n=[t[0],{viewBox:"0 0 20 20"},{fill:"currentColor"}],i={};for(let o=0;o<n.length;o+=1)i=ye(i,n[o]);return{c(){e=De("svg"),l=De("path"),a(l,"d","M10 1.6a8.4 8.4 0 100 16.8 8.4 8.4 0 000-16.8zm4.789 11.461L13.06 14.79 10 11.729l-3.061 3.06L5.21 13.06 8.272 10 5.211 6.939 6.94 5.211 10 8.271l3.061-3.061 1.729 1.729L11.728 10l3.061 3.061z"),Ue(e,i)},m(o,s){q(o,e,s),c(e,l)},p(o,[s]){Ue(e,i=mt(n,[s&1&&o[0],{viewBox:"0 0 20 20"},{fill:"currentColor"}]))},i:O,o:O,d(o){o&&L(e)}}}function kn(t,e,l){return t.$$set=n=>{l(0,e=ye(ye({},e),Ne(n)))},e=Ne(e),[e]}class rl extends ke{constructor(e){super(),ve(this,e,kn,vn,he,{})}}function wn(t){let e,l,n,i=[t[0],{viewBox:"0 0 24 24"},{fill:"currentColor"}],o={};for(let s=0;s<i.length;s+=1)o=ye(o,i[s]);return{c(){e=De("svg"),l=De("path"),n=De("path"),a(l,"fill","none"),a(l,"d","M0 0h24v24H0V0z"),a(n,"d","M14.48 11.95c.17.02.34.05.52.05 2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4c0 .18.03.35.05.52l3.43 3.43zm2.21 2.21L22.53 20H23v-2c0-2.14-3.56-3.5-6.31-3.84zM0 3.12l4 4V10H1v2h3v3h2v-3h2.88l2.51 2.51C9.19 15.11 7 16.3 7 18v2h9.88l4 4 1.41-1.41L1.41 1.71 0 3.12zM6.88 10H6v-.88l.88.88z"),Ue(e,o)},m(s,u){q(s,e,u),c(e,l),c(e,n)},p(s,[u]){Ue(e,o=mt(i,[u&1&&s[0],{viewBox:"0 0 24 24"},{fill:"currentColor"}]))},i:O,o:O,d(s){s&&L(e)}}}function yn(t,e,l){return t.$$set=n=>{l(0,e=ye(ye({},e),Ne(n)))},e=Ne(e),[e]}class An extends ke{constructor(e){super(),ve(this,e,yn,wn,he,{})}}function Et(t){return Object.prototype.toString.call(t)==="[object Date]"}function ut(t,e,l,n){if(typeof l=="number"||Et(l)){const i=n-l,o=(l-e)/(t.dt||1/60),s=t.opts.stiffness*i,u=t.opts.damping*o,r=(s-u)*t.inv_mass,f=(o+r)*t.dt;return Math.abs(f)<t.opts.precision&&Math.abs(i)<t.opts.precision?n:(t.settled=!1,Et(l)?new Date(l.getTime()+f):l+f)}else{if(Array.isArray(l))return l.map((i,o)=>ut(t,e[o],l[o],n[o]));if(typeof l=="object"){const i={};for(const o in l)i[o]=ut(t,e[o],l[o],n[o]);return i}else throw new Error(`Cannot spring ${typeof l} values`)}}function Sn(t,e={}){const l=tt(t),{stiffness:n=.15,damping:i=.8,precision:o=.01}=e;let s,u,r,f=t,_=t,k=1,S=0,g=!1;function b(p,w={}){_=p;const B=r={};if(t==null||w.hard||h.stiffness>=1&&h.damping>=1)return g=!0,s=bt(),f=p,l.set(t=_),Promise.resolve();if(w.soft){const R=w.soft===!0?.5:+w.soft;S=1/(R*60),k=0}return u||(s=bt(),g=!1,u=Hl(R=>{if(g)return g=!1,u=null,!1;k=Math.min(k+S,1);const T={inv_mass:k,opts:h,settled:!0,dt:(R-s)*60/1e3},M=ut(T,f,t,_);return s=R,f=t,l.set(t=M),T.settled&&(u=null),!T.settled})),new Promise(R=>{u.promise.then(()=>{B===r&&R()})})}const h={set:b,update:(p,w)=>b(p(_,t),w),subscribe:l.subscribe,stiffness:n,damping:i,precision:o};return h}function Cn(t){let e,l=`rotate(${t[0].angle}deg) scale(${t[0].scale}) translate(${t[0].dx}px,
  ${t[0].dy}px)`,n;const i=t[11].default,o=Ye(i,t,t[10],null);return{c(){e=m("span"),o&&o.c(),ne(e,"transform",l,!1)},m(s,u){q(s,e,u),o&&o.m(e,null),n=!0},p(s,[u]){o&&o.p&&(!n||u&1024)&&Je(o,i,s,s[10],n?Ke(i,s[10],u,null):Qe(s[10]),null),u&1&&l!==(l=`rotate(${s[0].angle}deg) scale(${s[0].scale}) translate(${s[0].dx}px,
  ${s[0].dy}px)`)&&ne(e,"transform",l,!1)},i(s){n||(j(o,s),n=!0)},o(s){P(o,s),n=!1},d(s){s&&L(e),o&&o.d(s)}}}function On(t,e,l){let n,{$$slots:i={},$$scope:o}=e,{wiggle:s=!1}=e,{angle:u=0}=e,{scale:r=1}=e,{dx:f=0}=e,{dy:_=0}=e,{duration:k=200}=e,{stiffness:S=.05}=e,{damping:g=.1}=e,b={angle:0,scale:1,dx:0,dy:0},h=Sn(b,{stiffness:S,damping:g});return Re(t,h,p=>l(0,n=p)),t.$$set=p=>{"wiggle"in p&&l(2,s=p.wiggle),"angle"in p&&l(3,u=p.angle),"scale"in p&&l(4,r=p.scale),"dx"in p&&l(5,f=p.dx),"dy"in p&&l(6,_=p.dy),"duration"in p&&l(7,k=p.duration),"stiffness"in p&&l(8,S=p.stiffness),"damping"in p&&l(9,g=p.damping),"$$scope"in p&&l(10,o=p.$$scope)},t.$$.update=()=>{t.$$.dirty&132&&s&&setTimeout(()=>l(2,s=!1),k),t.$$.dirty&124&&h.set(s?{scale:r,angle:u,dx:f,dy:_}:b)},[n,h,s,u,r,f,_,k,S,g,o,i]}class Tn extends ke{constructor(e){super(),ve(this,e,On,Cn,he,{wiggle:2,angle:3,scale:4,dx:5,dy:6,duration:7,stiffness:8,damping:9})}}function Dt(t,e,l){const n=t.slice();n[76]=e[l],n[82]=l;const i=n[76]instanceof Object?n[76]:{label:n[76]};n[77]=i.label,n[29]=i.disabled!==void 0?i.disabled:null,n[78]=i.title!==void 0?i.title:null,n[79]=i.selectedTitle!==void 0?i.selectedTitle:null,n[30]=i.disabledTitle!==void 0?i.disabledTitle:n[23];const o=n[6]&&n[36](n[6])===n[77];return n[80]=o,n}const Bn=t=>({option:t[1]&16}),jt=t=>({option:t[76],idx:t[82]}),Mn=t=>({}),Lt=t=>({}),En=t=>({}),qt=t=>({});function Rt(t,e,l){const n=t.slice();return n[76]=e[l],n[82]=l,n}const Dn=t=>({option:t[0]&2}),zt=t=>({option:t[76],idx:t[82]});function jn(t){let e=t[36](t[76])+"",l;return{c(){l=fe(e)},m(n,i){q(n,l,i)},p(n,i){i[0]&2&&e!==(e=n[36](n[76])+"")&&pe(l,e)},d(n){n&&L(l)}}}function Nt(t){let e,l,n,i,o,s;l=new rl({props:{width:"15px"}});function u(){return t[54](t[76])}function r(){return t[55](t[76])}return{c(){e=m("button"),me(l.$$.fragment),a(e,"type","button"),a(e,"title",n=t[21]+" "+t[36](t[76])),a(e,"class","svelte-18jo2l6")},m(f,_){q(f,e,_),ce(l,e,null),i=!0,o||(s=[I(e,"mouseup",Te(u)),I(e,"keydown",function(){ft(t[42](r))&&t[42](r).apply(this,arguments)})],o=!0)},p(f,_){t=f,(!i||_[0]&2097154&&n!==(n=t[21]+" "+t[36](t[76])))&&a(e,"title",n)},i(f){i||(j(l.$$.fragment,f),i=!0)},o(f){P(l.$$.fragment,f),i=!1},d(f){f&&L(e),de(l),o=!1,ue(s)}}}function It(t){let e,l,n,i;const o=t[48].selected,s=Ye(o,t,t[73],zt),u=s||jn(t);let r=!t[29]&&Nt(t);return{c(){e=m("li"),u&&u.c(),l=A(),r&&r.c(),a(e,"class",n=Ie(t[16])+" svelte-18jo2l6"),a(e,"aria-selected","true")},m(f,_){q(f,e,_),u&&u.m(e,null),c(e,l),r&&r.m(e,null),i=!0},p(f,_){s?s.p&&(!i||_[0]&2|_[2]&2048)&&Je(s,o,f,f[73],i?Ke(o,f[73],_,Dn):Qe(f[73]),zt):u&&u.p&&(!i||_[0]&2)&&u.p(f,i?_:[-1,-1,-1]),f[29]?r&&(ge(),P(r,1,1,()=>{r=null}),be()):r?(r.p(f,_),_[0]&536870912&&j(r,1)):(r=Nt(f),r.c(),j(r,1),r.m(e,null)),(!i||_[0]&65536&&n!==(n=Ie(f[16])+" svelte-18jo2l6"))&&a(e,"class",n)},i(f){i||(j(u,f),j(r),i=!0)},o(f){P(u,f),P(r),i=!1},d(f){f&&L(e),u&&u.d(f),r&&r.d()}}}function Ut(t){let e;const l=t[48].spinner,n=Ye(l,t,t[73],qt),i=n||Ln();return{c(){i&&i.c()},m(o,s){i&&i.m(o,s),e=!0},p(o,s){n&&n.p&&(!e||s[2]&2048)&&Je(n,l,o,o[73],e?Ke(l,o[73],s,En):Qe(o[73]),qt)},i(o){e||(j(i,o),e=!0)},o(o){P(i,o),e=!1},d(o){i&&i.d(o)}}}function Ln(t){let e,l;return e=new hn({}),{c(){me(e.$$.fragment)},m(n,i){ce(e,n,i),l=!0},i(n){l||(j(e.$$.fragment,n),l=!0)},o(n){P(e.$$.fragment,n),l=!1},d(n){de(e,n)}}}function qn(t){let e,l,n,i=t[8]&&(t[8]>1||t[9])&&Pt(t),o=t[8]!==1&&t[1].length>1&&Ft(t);return{c(){i&&i.c(),e=A(),o&&o.c(),l=We()},m(s,u){i&&i.m(s,u),q(s,e,u),o&&o.m(s,u),q(s,l,u),n=!0},p(s,u){s[8]&&(s[8]>1||s[9])?i?(i.p(s,u),u[0]&768&&j(i,1)):(i=Pt(s),i.c(),j(i,1),i.m(e.parentNode,e)):i&&(ge(),P(i,1,1,()=>{i=null}),be()),s[8]!==1&&s[1].length>1?o?(o.p(s,u),u[0]&258&&j(o,1)):(o=Ft(s),o.c(),j(o,1),o.m(l.parentNode,l)):o&&(ge(),P(o,1,1,()=>{o=null}),be())},i(s){n||(j(i),j(o),n=!0)},o(s){P(i),P(o),n=!1},d(s){i&&i.d(s),s&&L(e),o&&o.d(s),s&&L(l)}}}function Rn(t){let e;const l=t[48]["disabled-icon"],n=Ye(l,t,t[73],Lt),i=n||Nn();return{c(){i&&i.c()},m(o,s){i&&i.m(o,s),e=!0},p(o,s){n&&n.p&&(!e||s[2]&2048)&&Je(n,l,o,o[73],e?Ke(l,o[73],s,Mn):Qe(o[73]),Lt)},i(o){e||(j(i,o),e=!0)},o(o){P(i,o),e=!1},d(o){i&&i.d(o)}}}function Pt(t){let e,l,n;function i(s){t[60](s)}let o={angle:20,$$slots:{default:[zn]},$$scope:{ctx:t}};return t[33]!==void 0&&(o.wiggle=t[33]),e=new Tn({props:o}),je.push(()=>ht(e,"wiggle",i)),{c(){me(e.$$.fragment)},m(s,u){ce(e,s,u),n=!0},p(s,u){const r={};u[0]&770|u[2]&2048&&(r.$$scope={dirty:u,ctx:s}),!l&&u[1]&4&&(l=!0,r.wiggle=s[33],dt(()=>l=!1)),e.$set(r)},i(s){n||(j(e.$$.fragment,s),n=!0)},o(s){P(e.$$.fragment,s),n=!1},d(s){de(e,s)}}}function zn(t){var i,o;let e,l=((o=(i=t[9])==null?void 0:i.call(t,t[1].length,t[8]))!=null?o:t[8]>1?`${t[1].length}/${t[8]}`:"")+"",n;return{c(){e=m("span"),n=fe(l),ne(e,"padding","0 3pt"),a(e,"class","svelte-18jo2l6")},m(s,u){q(s,e,u),c(e,n)},p(s,u){var r,f;u[0]&770&&l!==(l=((f=(r=s[9])==null?void 0:r.call(s,s[1].length,s[8]))!=null?f:s[8]>1?`${s[1].length}/${s[8]}`:"")+"")&&pe(n,l)},d(s){s&&L(e)}}}function Ft(t){let e,l,n,i,o;return l=new rl({props:{width:"15px"}}),{c(){e=m("button"),me(l.$$.fragment),a(e,"type","button"),a(e,"class","remove-all svelte-18jo2l6"),a(e,"title",t[22])},m(s,u){q(s,e,u),ce(l,e,null),n=!0,i||(o=[I(e,"mouseup",Te(t[41])),I(e,"keydown",t[42](t[41]))],i=!0)},p(s,u){(!n||u[0]&4194304)&&a(e,"title",s[22])},i(s){n||(j(l.$$.fragment,s),n=!0)},o(s){P(l.$$.fragment,s),n=!1},d(s){s&&L(e),de(l),i=!1,ue(o)}}}function Nn(t){let e,l;return e=new An({props:{width:"15px"}}),{c(){me(e.$$.fragment)},m(n,i){ce(e,n,i),l=!0},p:O,i(n){l||(j(e.$$.fragment,n),l=!0)},o(n){P(e.$$.fragment,n),l=!1},d(n){de(e,n)}}}function Ht(t){let e;function l(o,s){return o[24]&&o[0]?Un:In}let n=l(t),i=n(t);return{c(){i.c(),e=We()},m(o,s){i.m(o,s),q(o,e,s)},p(o,s){n===(n=l(o))&&i?i.p(o,s):(i.d(1),i=n(o),i&&(i.c(),i.m(e.parentNode,e)))},d(o){i.d(o),o&&L(e)}}}function In(t){let e,l;return{c(){e=m("span"),l=fe(t[13]),a(e,"class","svelte-18jo2l6")},m(n,i){q(n,e,i),c(e,l)},p(n,i){i[0]&8192&&pe(l,n[13])},d(n){n&&L(e)}}}function Un(t){let e,l,n,i,o;return{c(){e=m("li"),l=fe(t[25]),n=A(),a(e,"title",t[25]),a(e,"aria-selected","false"),a(e,"class","svelte-18jo2l6"),ie(e,"active",t[32])},m(s,u){q(s,e,u),c(e,l),c(e,n),i||(o=[I(e,"mousedown",Te(t[50])),I(e,"mouseup",Te(t[66])),I(e,"mouseover",t[67]),I(e,"focus",t[68]),I(e,"mouseout",t[69]),I(e,"blur",t[70])],i=!0)},p(s,u){u[0]&33554432&&pe(l,s[25]),u[0]&33554432&&a(e,"title",s[25]),u[1]&2&&ie(e,"active",s[32])},d(s){s&&L(e),i=!1,ue(o)}}}function Pn(t){let e=t[36](t[76])+"",l;return{c(){l=fe(e)},m(n,i){q(n,l,i)},p(n,i){i[1]&16&&e!==(e=n[36](n[76])+"")&&pe(l,e)},d(n){n&&L(l)}}}function Vt(t){let e,l,n,i,o,s,u;const r=t[48].option,f=Ye(r,t,t[73],jt),_=f||Pn(t);function k(){return t[61](t[29],t[77])}function S(){return t[62](t[29],t[76])}function g(){return t[63](t[29],t[76])}return{c(){e=m("li"),_&&_.c(),l=A(),a(e,"title",n=t[29]?t[30]:t[34](t[77])&&t[79]||t[78]),a(e,"class",i=t[18]+" "+(t[80]?t[19]:"")+" svelte-18jo2l6"),a(e,"aria-selected","false"),ie(e,"selected",t[34](t[77])),ie(e,"active",t[80]),ie(e,"disabled",t[29])},m(b,h){q(b,e,h),_&&_.m(e,null),c(e,l),o=!0,s||(u=[I(e,"mousedown",Te(t[49])),I(e,"mouseup",Te(k)),I(e,"mouseover",S),I(e,"focus",g),I(e,"mouseout",t[64]),I(e,"blur",t[65])],s=!0)},p(b,h){t=b,f?f.p&&(!o||h[1]&16|h[2]&2048)&&Je(f,r,t,t[73],o?Ke(r,t[73],h,Bn):Qe(t[73]),jt):_&&_.p&&(!o||h[1]&16)&&_.p(t,o?h:[-1,-1,-1]),(!o||h[1]&24&&n!==(n=t[29]?t[30]:t[34](t[77])&&t[79]||t[78]))&&a(e,"title",n),(!o||h[0]&786496|h[1]&16&&i!==(i=t[18]+" "+(t[80]?t[19]:"")+" svelte-18jo2l6"))&&a(e,"class",i),h[0]&786496|h[1]&24&&ie(e,"selected",t[34](t[77])),h[0]&786496|h[1]&48&&ie(e,"active",t[80]),h[0]&786496|h[1]&16&&ie(e,"disabled",t[29])},i(b){o||(j(_,b),o=!0)},o(b){P(_,b),o=!1},d(b){b&&L(e),_&&_.d(b),s=!1,ue(u)}}}function Fn(t){let e,l,n,i,o,s,u,r,f,_,k,S,g,b,h,p,w,B,R,T,M,G,F,y,z,H,x;i=new pn({props:{width:"15px",style:"min-width: 1em; padding: 0 1pt;"}});let J=t[1],Y=[];for(let v=0;v<J.length;v+=1)Y[v]=It(Rt(t,J,v));const V=v=>P(Y[v],1,1,()=>{Y[v]=null});let K=t[26]&&Ut(t);const Z=[Rn,qn],ee=[];function E(v,C){return v[29]?0:v[1].length>0?1:-1}~(p=E(t))&&(w=ee[p]=Z[p](t));let N=t[35],D=[];for(let v=0;v<N.length;v+=1)D[v]=Vt(Dt(t,N,v));const le=v=>P(D[v],1,1,()=>{D[v]=null});let $=null;return N.length||($=Ht(t)),{c(){e=m("div"),l=m("input"),n=A(),me(i.$$.fragment),o=A(),s=m("ul");for(let v=0;v<Y.length;v+=1)Y[v].c();u=A(),r=m("li"),f=m("input"),b=A(),K&&K.c(),h=A(),w&&w.c(),B=A(),R=m("ul");for(let v=0;v<D.length;v+=1)D[v].c();$&&$.c(),l.required=t[27],a(l,"tabindex","-1"),a(l,"aria-hidden","true"),a(l,"aria-label","ignore this, used only to prevent form submission if select is required but empty"),a(l,"class","form-control svelte-18jo2l6"),a(f,"class",_=Ie(t[20])+" svelte-18jo2l6"),a(f,"autocomplete",t[28]),a(f,"id",t[11]),a(f,"name",t[12]),f.disabled=t[29],a(f,"placeholder",k=t[2].length?"":t[10]),a(f,"aria-invalid",S=t[7]?"true":null),ne(r,"display","contents"),a(r,"class","svelte-18jo2l6"),a(s,"class",g="selected "+t[15]+" svelte-18jo2l6"),a(R,"class",T="options "+t[17]+" svelte-18jo2l6"),ie(R,"hidden",!t[3]),a(e,"aria-expanded",t[3]),a(e,"aria-multiselectable",M=t[8]===null||t[8]>1),a(e,"class",G="multiselect "+t[14]+" svelte-18jo2l6"),a(e,"title",F=t[29]?t[30]:null),a(e,"aria-disabled",y=t[29]?"true":null),ie(e,"disabled",t[29]),ie(e,"single",t[8]===1),ie(e,"open",t[3]),ie(e,"invalid",t[7])},m(v,C){q(v,e,C),c(e,l),_e(l,t[31]),c(e,n),ce(i,e,null),c(e,o),c(e,s);for(let se=0;se<Y.length;se+=1)Y[se].m(s,null);c(s,u),c(s,r),c(r,f),t[56](f),_e(f,t[0]),c(e,b),K&&K.m(e,null),c(e,h),~p&&ee[p].m(e,null),c(e,B),c(e,R);for(let se=0;se<D.length;se+=1)D[se].m(R,null);$&&$.m(R,null),t[71](e),z=!0,H||(x=[I(window,"click",t[51]),I(l,"input",t[52]),I(l,"invalid",t[53]),I(f,"input",t[57]),I(f,"mouseup",Vl(Te(t[58]))),I(f,"keydown",t[40]),I(f,"focus",t[59]),I(e,"mouseup",Te(t[72]))],H=!0)},p(v,C){if((!z||C[0]&134217728)&&(l.required=v[27]),C[1]&1&&l.value!==v[31]&&_e(l,v[31]),C[0]&539033602|C[1]&2208|C[2]&2048){J=v[1];let Q;for(Q=0;Q<J.length;Q+=1){const oe=Rt(v,J,Q);Y[Q]?(Y[Q].p(oe,C),j(Y[Q],1)):(Y[Q]=It(oe),Y[Q].c(),j(Y[Q],1),Y[Q].m(s,u))}for(ge(),Q=J.length;Q<Y.length;Q+=1)V(Q);be()}(!z||C[0]&1048576&&_!==(_=Ie(v[20])+" svelte-18jo2l6"))&&a(f,"class",_),(!z||C[0]&268435456)&&a(f,"autocomplete",v[28]),(!z||C[0]&2048)&&a(f,"id",v[11]),(!z||C[0]&4096)&&a(f,"name",v[12]),(!z||C[0]&536870912)&&(f.disabled=v[29]),(!z||C[0]&1028&&k!==(k=v[2].length?"":v[10]))&&a(f,"placeholder",k),(!z||C[0]&128&&S!==(S=v[7]?"true":null))&&a(f,"aria-invalid",S),C[0]&1&&f.value!==v[0]&&_e(f,v[0]),(!z||C[0]&32768&&g!==(g="selected "+v[15]+" svelte-18jo2l6"))&&a(s,"class",g),v[26]?K?(K.p(v,C),C[0]&67108864&&j(K,1)):(K=Ut(v),K.c(),j(K,1),K.m(e,h)):K&&(ge(),P(K,1,1,()=>{K=null}),be());let se=p;if(p=E(v),p===se?~p&&ee[p].p(v,C):(w&&(ge(),P(ee[se],1,1,()=>{ee[se]=null}),be()),~p?(w=ee[p],w?w.p(v,C):(w=ee[p]=Z[p](v),w.c()),j(w,1),w.m(e,B)):w=null),C[0]&51126337|C[1]&250|C[2]&2048){N=v[35];let Q;for(Q=0;Q<N.length;Q+=1){const oe=Dt(v,N,Q);D[Q]?(D[Q].p(oe,C),j(D[Q],1)):(D[Q]=Vt(oe),D[Q].c(),j(D[Q],1),D[Q].m(R,null))}for(ge(),Q=N.length;Q<D.length;Q+=1)le(Q);be(),!N.length&&$?$.p(v,C):N.length?$&&($.d(1),$=null):($=Ht(v),$.c(),$.m(R,null))}(!z||C[0]&131072&&T!==(T="options "+v[17]+" svelte-18jo2l6"))&&a(R,"class",T),C[0]&131080&&ie(R,"hidden",!v[3]),(!z||C[0]&8)&&a(e,"aria-expanded",v[3]),(!z||C[0]&256&&M!==(M=v[8]===null||v[8]>1))&&a(e,"aria-multiselectable",M),(!z||C[0]&16384&&G!==(G="multiselect "+v[14]+" svelte-18jo2l6"))&&a(e,"class",G),(!z||C[0]&1610612736&&F!==(F=v[29]?v[30]:null))&&a(e,"title",F),(!z||C[0]&536870912&&y!==(y=v[29]?"true":null))&&a(e,"aria-disabled",y),C[0]&536887296&&ie(e,"disabled",v[29]),C[0]&16640&&ie(e,"single",v[8]===1),C[0]&16392&&ie(e,"open",v[3]),C[0]&16512&&ie(e,"invalid",v[7])},i(v){if(!z){j(i.$$.fragment,v);for(let C=0;C<J.length;C+=1)j(Y[C]);j(K),j(w);for(let C=0;C<N.length;C+=1)j(D[C]);z=!0}},o(v){P(i.$$.fragment,v),Y=Y.filter(Boolean);for(let C=0;C<Y.length;C+=1)P(Y[C]);P(K),P(w),D=D.filter(Boolean);for(let C=0;C<D.length;C+=1)P(D[C]);z=!1},d(v){v&&L(e),de(i),Oe(Y,v),t[56](null),K&&K.d(),~p&&ee[p].d(),Oe(D,v),$&&$.d(),t[71](null),H=!1,ue(x)}}}function Hn(t,e,l){let n,i,o,{$$slots:s={},$$scope:u}=e,{searchText:r=""}=e,{showOptions:f=!1}=e,{maxSelect:_=null}=e,{maxSelectMsg:k=null}=e,{disabled:S=!1}=e,{disabledTitle:g="This field is disabled"}=e,{options:b}=e,{selected:h=[]}=e,{selectedLabels:p=[]}=e,{selectedValues:w=[]}=e,{input:B=null}=e,{outerDiv:R=null}=e,{placeholder:T=void 0}=e,{id:M=void 0}=e,{name:G=M}=e,{noOptionsMsg:F="No matching options"}=e,{activeOption:y=null}=e,{filterFunc:z=(d,W)=>W?`${X(d)}`.toLowerCase().includes(W.toLowerCase()):!0}=e,{outerDivClass:H=""}=e,{ulSelectedClass:x=""}=e,{liSelectedClass:J=""}=e,{ulOptionsClass:Y=""}=e,{liOptionClass:V=""}=e,{liActiveOptionClass:K=""}=e,{inputClass:Z=""}=e,{removeBtnTitle:ee="Remove"}=e,{removeAllTitle:E="Remove all"}=e,{defaultDisabledTitle:N="This option is disabled"}=e,{allowUserOptions:D=!1}=e,{addOptionMsg:le="Create this option..."}=e,{autoScroll:$=!0}=e,{loading:v=!1}=e,{required:C=!1}=e,{autocomplete:se="off"}=e,{invalid:Q=!1}=e,{sortSelected:oe=!1}=e;_!==null&&_<1&&console.error(`maxSelect must be null or positive integer, got ${_}`),(b==null?void 0:b.length)>0||console.error("MultiSelect is missing options"),Array.isArray(h)||console.error("selected prop must be an array");const te=Jl();let U=!1;const X=d=>d instanceof Object?d.label:d,re=d=>{var W;return d instanceof Object?(W=d.value)!=null?W:d.label:d};let Be=!1;function Pe(d){if(_&&_>1&&h.length>=_&&l(33,Be=!0),_===null||_===1||h.length<_){let W=b.find(we=>X(we)===d);if(!W&&[!0,"append"].includes(D)&&r.length>0&&(W={label:r,value:r},D==="append"&&l(43,b=[...b,W])),l(0,r=""),!W){console.error(`MultiSelect: option with label ${d} not found`);return}_===1?l(1,h=[W]):(l(1,h=[...h,W]),oe===!0?l(1,h=h.sort((we,Me)=>{const[Nl,Il]=[X(we),X(Me)];return`${Nl}`.localeCompare(`${Il}`)})):typeof oe=="function"&&l(1,h=h.sort(oe))),h.length===_?Ce(!1):B==null||B.focus(),te("add",{option:W}),te("change",{option:W,type:"add"})}}function Le(d){var we;if(h.length===0)return;h.splice(p.lastIndexOf(d),1),l(1,h);const W=(we=b.find(Me=>X(Me)===d))!=null?we:D&&{label:d,value:d};if(!W)return console.error(`MultiSelect: option with label ${d} not found`);te("remove",{option:W}),te("change",{option:W,type:"remove"})}function Ce(d){S||(l(3,f=d),d?(B==null||B.focus(),te("focus")):(B==null||B.blur(),l(6,y=null),te("blur")))}async function al(d){if(d.key==="Escape"||d.key==="Tab")Ce(!1),l(0,r="");else if(d.key==="Enter")if(d.preventDefault(),y){const W=X(y);p.includes(W)?Le(W):Pe(W),l(0,r="")}else D&&r.length>0?Pe(r):Ce(!0);else if(["ArrowDown","ArrowUp"].includes(d.key)){if(y===null&&i.length>0){l(6,y=i[0]);return}else if(D&&r.length>0){l(32,U=!U);return}else if(y===null)return;const W=d.key==="ArrowUp"?-1:1,we=i.indexOf(y)+W;if(we<0?l(6,y=i[i.length-1]):we===i.length?l(6,y=i[0]):l(6,y=i[we]),$){await Ql();const Me=document.querySelector("ul.options > li.active");Me==null||Me.scrollIntoViewIfNeeded()}}else d.key==="Backspace"&&p.length>0&&!r&&Le(p.at(-1))}function cl(){te("removeAll",{options:h}),te("change",{options:h,type:"removeAll"}),l(1,h=[]),l(0,r="")}const dl=d=>W=>{["Enter","Space"].includes(W.code)&&(W.preventDefault(),d())};function _l(d){vt.call(this,t,d)}function ml(d){vt.call(this,t,d)}const hl=d=>{R&&!R.contains(d.target)&&Ce(!1)};function gl(){n=this.value,l(31,n),l(44,w),l(1,h)}const bl=()=>l(7,Q=!0),pl=d=>Le(X(d)),vl=d=>Le(X(d));function kl(d){je[d?"unshift":"push"](()=>{B=d,l(4,B)})}function wl(){r=this.value,l(0,r)}const yl=()=>Ce(!0),Al=()=>Ce(!0);function Sl(d){Be=d,l(33,Be)}const Cl=(d,W)=>{d||(o(W)?Le(W):Pe(W))},Ol=(d,W)=>{d||l(6,y=W)},Tl=(d,W)=>{d||l(6,y=W)},Bl=()=>l(6,y=null),Ml=()=>l(6,y=null),El=()=>Pe(r),Dl=()=>l(32,U=!0),jl=()=>l(32,U=!0),Ll=()=>l(32,U=!1),ql=()=>l(32,U=!1);function Rl(d){je[d?"unshift":"push"](()=>{R=d,l(5,R)})}const zl=()=>Ce(!0);return t.$$set=d=>{"searchText"in d&&l(0,r=d.searchText),"showOptions"in d&&l(3,f=d.showOptions),"maxSelect"in d&&l(8,_=d.maxSelect),"maxSelectMsg"in d&&l(9,k=d.maxSelectMsg),"disabled"in d&&l(29,S=d.disabled),"disabledTitle"in d&&l(30,g=d.disabledTitle),"options"in d&&l(43,b=d.options),"selected"in d&&l(1,h=d.selected),"selectedLabels"in d&&l(2,p=d.selectedLabels),"selectedValues"in d&&l(44,w=d.selectedValues),"input"in d&&l(4,B=d.input),"outerDiv"in d&&l(5,R=d.outerDiv),"placeholder"in d&&l(10,T=d.placeholder),"id"in d&&l(11,M=d.id),"name"in d&&l(12,G=d.name),"noOptionsMsg"in d&&l(13,F=d.noOptionsMsg),"activeOption"in d&&l(6,y=d.activeOption),"filterFunc"in d&&l(45,z=d.filterFunc),"outerDivClass"in d&&l(14,H=d.outerDivClass),"ulSelectedClass"in d&&l(15,x=d.ulSelectedClass),"liSelectedClass"in d&&l(16,J=d.liSelectedClass),"ulOptionsClass"in d&&l(17,Y=d.ulOptionsClass),"liOptionClass"in d&&l(18,V=d.liOptionClass),"liActiveOptionClass"in d&&l(19,K=d.liActiveOptionClass),"inputClass"in d&&l(20,Z=d.inputClass),"removeBtnTitle"in d&&l(21,ee=d.removeBtnTitle),"removeAllTitle"in d&&l(22,E=d.removeAllTitle),"defaultDisabledTitle"in d&&l(23,N=d.defaultDisabledTitle),"allowUserOptions"in d&&l(24,D=d.allowUserOptions),"addOptionMsg"in d&&l(25,le=d.addOptionMsg),"autoScroll"in d&&l(46,$=d.autoScroll),"loading"in d&&l(26,v=d.loading),"required"in d&&l(27,C=d.required),"autocomplete"in d&&l(28,se=d.autocomplete),"invalid"in d&&l(7,Q=d.invalid),"sortSelected"in d&&l(47,oe=d.sortSelected),"$$scope"in d&&l(73,u=d.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&2&&l(2,p=h.map(X)),t.$$.dirty[0]&2&&l(44,w=h.map(re)),t.$$.dirty[1]&8192&&l(31,n=w.join(",")),t.$$.dirty[1]&1&&n&&l(7,Q=!1),t.$$.dirty[0]&5|t.$$.dirty[1]&20480&&l(35,i=b.filter(d=>z(d,r)&&!(d instanceof Object&&d.disabled)&&!p.includes(X(d)))),t.$$.dirty[0]&4&&l(34,o=d=>p.includes(d))},[r,h,p,f,B,R,y,Q,_,k,T,M,G,F,H,x,J,Y,V,K,Z,ee,E,N,D,le,v,C,se,S,g,n,U,Be,o,i,X,Pe,Le,Ce,al,cl,dl,b,w,z,$,oe,s,_l,ml,hl,gl,bl,pl,vl,kl,wl,yl,Al,Sl,Cl,Ol,Tl,Bl,Ml,El,Dl,jl,Ll,ql,Rl,zl,u]}class ul extends ke{constructor(e){super(),ve(this,e,Hn,Fn,he,{searchText:0,showOptions:3,maxSelect:8,maxSelectMsg:9,disabled:29,disabledTitle:30,options:43,selected:1,selectedLabels:2,selectedValues:44,input:4,outerDiv:5,placeholder:10,id:11,name:12,noOptionsMsg:13,activeOption:6,filterFunc:45,outerDivClass:14,ulSelectedClass:15,liSelectedClass:16,ulOptionsClass:17,liOptionClass:18,liActiveOptionClass:19,inputClass:20,removeBtnTitle:21,removeAllTitle:22,defaultDisabledTitle:23,allowUserOptions:24,addOptionMsg:25,autoScroll:46,loading:26,required:27,autocomplete:28,invalid:7,sortSelected:47},null,[-1,-1,-1])}}function Vn(t){return{c:O,m:O,p:O,i:O,o:O,d:O}}function Gn(t){let e,l,n;function i(s){t[7](s)}let o={inputClass:"input-like",outerDivClass:"color-fix",allowUserOptions:!0,addOptionMsg:"+ Create new tag",options:t[11].map(Zn)};return t[3]!==void 0&&(o.selected=t[3]),e=new ul({props:o}),je.push(()=>ht(e,"selected",i)),{c(){me(e.$$.fragment)},m(s,u){ce(e,s,u),n=!0},p(s,u){const r={};!l&&u&8&&(l=!0,r.selected=s[3],dt(()=>l=!1)),e.$set(r)},i(s){n||(j(e.$$.fragment,s),n=!0)},o(s){P(e.$$.fragment,s),n=!1},d(s){de(e,s)}}}function Yn(t){return{c:O,m:O,p:O,i:O,o:O,d:O}}function Kn(t){return{c:O,m:O,p:O,i:O,o:O,d:O}}function Jn(t){let e,l,n;function i(s){t[8](s)}let o={inputClass:"input-like",outerDivClass:"color-fix",options:t[10].map(Xn)};return t[4]!==void 0&&(o.selected=t[4]),e=new ul({props:o}),je.push(()=>ht(e,"selected",i)),{c(){me(e.$$.fragment)},m(s,u){ce(e,s,u),n=!0},p(s,u){const r={};!l&&u&16&&(l=!0,r.selected=s[4],dt(()=>l=!1)),e.$set(r)},i(s){n||(j(e.$$.fragment,s),n=!0)},o(s){P(e.$$.fragment,s),n=!1},d(s){de(e,s)}}}function Qn(t){return{c:O,m:O,p:O,i:O,o:O,d:O}}function Gt(t){let e,l;return{c(){e=m("span"),l=fe(t[1]),a(e,"class","m-b-1 red")},m(n,i){q(n,e,i),c(e,l)},p(n,i){i&2&&pe(l,n[1])},d(n){n&&L(e)}}}function Wn(t){let e,l,n,i,o,s,u,r,f,_,k,S,g,b,h,p,w,B,R,T=t[0]==="SUBMITTING"?"Loading":"Add",M,G,F,y,z,H={ctx:t,current:null,token:null,hasCatch:!1,pending:Yn,then:Gn,catch:Vn,value:11,blocks:[,,,]};ot(Se("/tags"),H);let x={ctx:t,current:null,token:null,hasCatch:!1,pending:Qn,then:Jn,catch:Kn,value:10,blocks:[,,,]};ot(Se("/folders"),x);let J=t[0]==="ERROR"&&Gt(t);return{c(){e=m("dialog"),l=m("header"),l.innerHTML="<h2>Add new bookmark</h2>",n=A(),i=m("div"),o=m("div"),s=m("label"),s.innerHTML='<strong>URL</strong><span class="red">*</span>',u=A(),r=m("input"),f=A(),_=m("div"),k=m("label"),k.innerHTML="<strong>Tags</strong>",S=A(),H.block.c(),g=A(),b=m("div"),h=m("label"),h.innerHTML="<strong>Folder</strong>",p=A(),x.block.c(),w=A(),J&&J.c(),B=A(),R=m("button"),M=fe(T),a(s,"for","url"),a(r,"type","url"),a(r,"placeholder","Add new URL"),a(r,"name","url"),a(r,"id","url"),r.required=!0,a(o,"class","col m-b-1"),a(k,"for","tags"),a(_,"class","col m-b-1"),a(h,"for","folders"),a(b,"class","col m-b-1"),a(i,"class","col"),a(R,"class","w-full"),a(R,"type","submit"),R.disabled=G=t[0]==="SUBMITTING",ne(R,"margin","3em 0 1em 0"),a(e,"id","add-bookmark-modal"),a(e,"class","svelte-il024n")},m(Y,V){q(Y,e,V),c(e,l),c(e,n),c(e,i),c(i,o),c(o,s),c(o,u),c(o,r),_e(r,t[2]),c(i,f),c(i,_),c(_,k),c(_,S),H.block.m(_,H.anchor=null),H.mount=()=>_,H.anchor=null,c(i,g),c(i,b),c(b,h),c(b,p),x.block.m(b,x.anchor=null),x.mount=()=>b,x.anchor=null,c(i,w),J&&J.m(i,null),c(e,B),c(e,R),c(R,M),F=!0,y||(z=[I(r,"input",t[6]),I(R,"click",t[5])],y=!0)},p(Y,[V]){t=Y,V&4&&_e(r,t[2]),rt(H,t,V),rt(x,t,V),t[0]==="ERROR"?J?J.p(t,V):(J=Gt(t),J.c(),J.m(i,null)):J&&(J.d(1),J=null),(!F||V&1)&&T!==(T=t[0]==="SUBMITTING"?"Loading":"Add")&&pe(M,T),(!F||V&1&&G!==(G=t[0]==="SUBMITTING"))&&(R.disabled=G)},i(Y){F||(j(H.block),j(x.block),F=!0)},o(Y){for(let V=0;V<3;V+=1){const K=H.blocks[V];P(K)}for(let V=0;V<3;V+=1){const K=x.blocks[V];P(K)}F=!1},d(Y){Y&&L(e),H.block.d(),H.token=null,H=null,x.block.d(),x.token=null,x=null,J&&J.d(),y=!1,ue(z)}}}const Zn=({id:t,name:e})=>({label:e,value:t}),Xn=({id:t,name:e})=>({label:e,value:t});function xn(t,e,l){let n,i,o,s=[],u=[];const r=g=>g.label==g.value&&typeof g.value=="string",f=async()=>{l(0,n="SUBMITTING");const g=s.filter(r);if(g.length>0)try{const h=await Se("/tags/bulk","POST",{names:g.map(({value:p})=>p)});l(3,s=[...s.filter(p=>!r(p)),...h.map(({id:p,name:w})=>({label:w,value:p}))])}catch{l(0,n="ERROR"),l(1,i="An error occurred");return}const b={url:o,tags:s.map(({value:h})=>h),folders:u.map(({value:h})=>h)};try{const h=await Se("/bookmarks","POST",b);l(0,n="SUCCESS"),He.add(h),document.getElementById("add-bookmark-modal").close()}catch{l(0,n="ERROR"),l(1,i="An error occurred")}};function _(){o=this.value,l(2,o)}function k(g){s=g,l(3,s)}function S(g){u=g,l(4,u)}return[n,i,o,s,u,f,_,k,S]}class $n extends ke{constructor(e){super(),ve(this,e,xn,Wn,he,{})}}function Yt(t,e,l){const n=t.slice();return n[10]=e[l],n}function ei(t){let e,l,n,i,o,s,u=t[0]&&Kt(t);return{c(){e=m("span"),e.textContent="\u25B6",l=A(),u&&u.c(),n=We(),a(e,"class","arrow svelte-u7x5vz"),ie(e,"arrowDown",t[1])},m(r,f){q(r,e,f),q(r,l,f),u&&u.m(r,f),q(r,n,f),i=!0,o||(s=I(e,"click",t[6]),o=!0)},p(r,f){f&2&&ie(e,"arrowDown",r[1]),r[0]?u?(u.p(r,f),f&1&&j(u,1)):(u=Kt(r),u.c(),j(u,1),u.m(n.parentNode,n)):u&&(ge(),P(u,1,1,()=>{u=null}),be())},i(r){i||(j(u),i=!0)},o(r){P(u),i=!1},d(r){r&&L(e),r&&L(l),u&&u.d(r),r&&L(n),o=!1,s()}}}function Kt(t){let e,l,n=t[5],i=[];for(let s=0;s<n.length;s+=1)i[s]=Jt(Yt(t,n,s));const o=s=>P(i[s],1,1,()=>{i[s]=null});return{c(){for(let s=0;s<i.length;s+=1)i[s].c();e=We()},m(s,u){for(let r=0;r<i.length;r+=1)i[r].m(s,u);q(s,e,u),l=!0},p(s,u){if(u&32){n=s[5];let r;for(r=0;r<n.length;r+=1){const f=Yt(s,n,r);i[r]?(i[r].p(f,u),j(i[r],1)):(i[r]=Jt(f),i[r].c(),j(i[r],1),i[r].m(e.parentNode,e))}for(ge(),r=n.length;r<i.length;r+=1)o(r);be()}},i(s){if(!l){for(let u=0;u<n.length;u+=1)j(i[u]);l=!0}},o(s){i=i.filter(Boolean);for(let u=0;u<i.length;u+=1)P(i[u]);l=!1},d(s){Oe(i,s),s&&L(e)}}}function Jt(t){let e,l;return e=new fl({props:{tree:t[10]}}),{c(){me(e.$$.fragment)},m(n,i){ce(e,n,i),l=!0},p:O,i(n){l||(j(e.$$.fragment,n),l=!0)},o(n){P(e.$$.fragment,n),l=!1},d(n){de(e,n)}}}function ti(t){let e,l,n,i,o,s,u,r,f,_,k,S=t[5]&&ei(t);return{c(){e=m("ul"),l=m("li"),n=m("span"),i=m("input"),o=A(),s=m("label"),u=fe(t[3]),r=A(),S&&S.c(),a(i,"type","checkbox"),a(i,"name",t[4]),a(i,"id",t[4]),a(s,"for",t[4]),ne(s,"cursor","pointer"),a(s,"class","svelte-u7x5vz"),a(e,"class","svelte-u7x5vz")},m(g,b){q(g,e,b),c(e,l),c(l,n),c(n,i),_e(i,t[2].folder),c(n,o),c(n,s),c(s,u),c(n,r),S&&S.m(n,null),f=!0,_||(k=[I(i,"change",t[8]),I(i,"change",t[9])],_=!0)},p(g,[b]){b&4&&_e(i,g[2].folder),g[5]&&S.p(g,b)},i(g){f||(j(S),f=!0)},o(g){P(S),f=!1},d(g){g&&L(e),S&&S.d(),_=!1,ue(k)}}}const Qt={};function li(t,e,l){let n,i;Re(t,ae,g=>l(2,i=g));let{tree:o}=e;const{name:s,id:u,children:r}=o;let f=Qt[u]||!0;const _=()=>{l(0,f=Qt[u]=!f)};function k(){i.folder=this.value,ae.set(i)}const S=g=>{g.target.checked?Ve(ae,i.folder=u,i):Ve(ae,i.folder=null,i)};return t.$$set=g=>{"tree"in g&&l(7,o=g.tree)},t.$$.update=()=>{t.$$.dirty&1&&l(1,n=f)},[f,n,i,s,u,r,_,o,k,S]}class fl extends ke{constructor(e){super(),ve(this,e,li,ti,he,{tree:7})}}function Wt(t,e,l){const n=t.slice();return n[5]=e[l],n}function Zt(t,e,l){const n=t.slice();return n[9]=e[l],n}function ni(t){return{c:O,m:O,p:O,i:O,o:O,d:O}}function ii(t){let e,l,n=t[8],i=[];for(let s=0;s<n.length;s+=1)i[s]=Xt(Zt(t,n,s));const o=s=>P(i[s],1,1,()=>{i[s]=null});return{c(){for(let s=0;s<i.length;s+=1)i[s].c();e=We()},m(s,u){for(let r=0;r<i.length;r+=1)i[r].m(s,u);q(s,e,u),l=!0},p(s,u){if(u&0){n=s[8];let r;for(r=0;r<n.length;r+=1){const f=Zt(s,n,r);i[r]?(i[r].p(f,u),j(i[r],1)):(i[r]=Xt(f),i[r].c(),j(i[r],1),i[r].m(e.parentNode,e))}for(ge(),r=n.length;r<i.length;r+=1)o(r);be()}},i(s){if(!l){for(let u=0;u<n.length;u+=1)j(i[u]);l=!0}},o(s){i=i.filter(Boolean);for(let u=0;u<i.length;u+=1)P(i[u]);l=!1},d(s){Oe(i,s),s&&L(e)}}}function Xt(t){let e,l;return e=new fl({props:{tree:t[9]}}),{c(){me(e.$$.fragment)},m(n,i){ce(e,n,i),l=!0},p:O,i(n){l||(j(e.$$.fragment,n),l=!0)},o(n){P(e.$$.fragment,n),l=!1},d(n){de(e,n)}}}function si(t){return{c:O,m:O,p:O,i:O,o:O,d:O}}function xt(t){let e,l;return e=new on({props:{bookmark:t[5]}}),{c(){me(e.$$.fragment)},m(n,i){ce(e,n,i),l=!0},p(n,i){const o={};i&1&&(o.bookmark=n[5]),e.$set(o)},i(n){l||(j(e.$$.fragment,n),l=!0)},o(n){P(e.$$.fragment,n),l=!1},d(n){de(e,n)}}}function oi(t){let e,l,n,i,o,s,u,r,f,_,k,S,g,b,h,p,w,B,R,T,M,G,F,y,z,H,x,J,Y,V={ctx:t,current:null,token:null,hasCatch:!1,pending:si,then:ii,catch:ni,value:8,blocks:[,,,]};ot(Se("/folders/tree"),V);let K=t[0],Z=[];for(let E=0;E<K.length;E+=1)Z[E]=xt(Wt(t,K,E));const ee=E=>P(Z[E],1,1,()=>{Z[E]=null});return G=new fn({}),y=new $n({}),H=new dn({}),{c(){e=m("nav"),l=m("div"),n=m("h1"),n.textContent="Rengoku",i=A(),o=m("button"),o.textContent="+ Add Bookmark",s=A(),u=m("hr"),r=A(),f=m("aside"),_=m("h2"),_.textContent="Folders",k=A(),S=m("hr"),g=A(),V.block.c(),b=A(),h=m("main"),p=m("div"),p.innerHTML=`<h2 style="padding-left: 0.5rem;">Showing 20 of 201</h2> 
    <hr/>`,w=A();for(let E=0;E<Z.length;E+=1)Z[E].c();B=A(),R=m("div"),R.innerHTML="<button>Load More</button>",T=A(),M=m("aside"),me(G.$$.fragment),F=A(),me(y.$$.fragment),z=A(),me(H.$$.fragment),a(o,"class","m-l-auto"),a(l,"class","row"),a(e,"class","svelte-zxsuuu"),a(f,"id","folders"),a(f,"class","sticky svelte-zxsuuu"),a(p,"class","sticky"),ne(R,"text-align","center"),a(h,"class","svelte-zxsuuu"),a(M,"id","filters"),a(M,"class","sticky svelte-zxsuuu")},m(E,N){q(E,e,N),c(e,l),c(l,n),c(l,i),c(l,o),c(e,s),c(e,u),q(E,r,N),q(E,f,N),c(f,_),c(f,k),c(f,S),c(f,g),V.block.m(f,V.anchor=null),V.mount=()=>f,V.anchor=null,q(E,b,N),q(E,h,N),c(h,p),c(h,w);for(let D=0;D<Z.length;D+=1)Z[D].m(h,null);c(h,B),c(h,R),q(E,T,N),q(E,M,N),ce(G,M,null),q(E,F,N),ce(y,E,N),q(E,z,N),ce(H,E,N),x=!0,J||(Y=[I(o,"click",t[3]),I(R,"click",t[4])],J=!0)},p(E,[N]){if(t=E,rt(V,t,N),N&1){K=t[0];let D;for(D=0;D<K.length;D+=1){const le=Wt(t,K,D);Z[D]?(Z[D].p(le,N),j(Z[D],1)):(Z[D]=xt(le),Z[D].c(),j(Z[D],1),Z[D].m(h,B))}for(ge(),D=K.length;D<Z.length;D+=1)ee(D);be()}},i(E){if(!x){j(V.block);for(let N=0;N<K.length;N+=1)j(Z[N]);j(G.$$.fragment,E),j(y.$$.fragment,E),j(H.$$.fragment,E),x=!0}},o(E){for(let N=0;N<3;N+=1){const D=V.blocks[N];P(D)}Z=Z.filter(Boolean);for(let N=0;N<Z.length;N+=1)P(Z[N]);P(G.$$.fragment,E),P(y.$$.fragment,E),P(H.$$.fragment,E),x=!1},d(E){E&&L(e),E&&L(r),E&&L(f),V.block.d(),V.token=null,V=null,E&&L(b),E&&L(h),Oe(Z,E),E&&L(T),E&&L(M),de(G),E&&L(F),de(y,E),E&&L(z),de(H,E),J=!1,ue(Y)}}}function ri(t,e,l){let n,i,o;Re(t,en,r=>l(2,n=r)),Re(t,He,r=>l(0,i=r)),Re(t,ae,r=>l(1,o=r)),ct(()=>He.fetch(n));const s=()=>{document.getElementById("add-bookmark-modal").showModal()},u=()=>{Ve(ae,o.page++,o)};return t.$$.update=()=>{t.$$.dirty&4&&He.fetch(n)},[i,o,n,s,u]}class ui extends ke{constructor(e){super(),ve(this,e,ri,oi,he,{})}}new ui({target:document.body});
