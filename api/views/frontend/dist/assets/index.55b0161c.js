const et=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const _ of u.addedNodes)_.tagName==="LINK"&&_.rel==="modulepreload"&&l(_)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerpolicy&&(u.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?u.credentials="include":o.crossorigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function l(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}};et();function G(){}function We(e){return e()}function Re(){return Object.create(null)}function Q(e){e.forEach(We)}function Xe(e){return typeof e=="function"}function re(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let ke;function qe(e,t){return ke||(ke=document.createElement("a")),ke.href=t,e===ke.href}function tt(e){return Object.keys(e).length===0}function Ze(e,...t){if(e==null)return G;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function Ee(e,t,n){e.$$.on_destroy.push(Ze(t,n))}function Ne(e,t,n){return e.set(n),t}function i(e,t){e.appendChild(t)}function I(e,t,n){e.insertBefore(t,n||null)}function L(e){e.parentNode.removeChild(e)}function Be(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function s(e){return document.createElement(e)}function W(e){return document.createTextNode(e)}function y(){return W(" ")}function q(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function nt(e){return function(t){return t.preventDefault(),e.call(this,t)}}function r(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function lt(e){return Array.from(e.childNodes)}function oe(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function le(e,t){e.value=t==null?"":t}function ie(e,t,n,l){n===null?e.style.removeProperty(t):e.style.setProperty(t,n,l?"important":"")}function Pe(e,t){for(let n=0;n<e.options.length;n+=1){const l=e.options[n];if(l.__value===t){l.selected=!0;return}}e.selectedIndex=-1}function ot(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}let he;function ce(e){he=e}function it(){if(!he)throw new Error("Function called outside component initialization");return he}function De(e){it().$$.on_mount.push(e)}const ue=[],Ue=[],$e=[],je=[],rt=Promise.resolve();let Ae=!1;function st(){Ae||(Ae=!0,rt.then(xe))}function Oe(e){$e.push(e)}const Ce=new Set;let ye=0;function xe(){const e=he;do{for(;ye<ue.length;){const t=ue[ye];ye++,ce(t),at(t.$$)}for(ce(null),ue.length=0,ye=0;Ue.length;)Ue.pop()();for(let t=0;t<$e.length;t+=1){const n=$e[t];Ce.has(n)||(Ce.add(n),n())}$e.length=0}while(ue.length);for(;je.length;)je.pop()();Ae=!1,Ce.clear(),ce(e)}function at(e){if(e.fragment!==null){e.update(),Q(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Oe)}}const we=new Set;let Z;function ut(){Z={r:0,c:[],p:Z}}function ct(){Z.r||Q(Z.c),Z=Z.p}function V(e,t){e&&e.i&&(we.delete(e),e.i(t))}function ne(e,t,n,l){if(e&&e.o){if(we.has(e))return;we.add(e),Z.c.push(()=>{we.delete(e),l&&(n&&e.d(1),l())}),e.o(t)}}function Se(e){e&&e.c()}function fe(e,t,n,l){const{fragment:o,on_mount:u,on_destroy:_,after_update:d}=e.$$;o&&o.m(t,n),l||Oe(()=>{const f=u.map(We).filter(Xe);_?_.push(...f):Q(f),e.$$.on_mount=[]}),d.forEach(Oe)}function de(e,t){const n=e.$$;n.fragment!==null&&(Q(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function ft(e,t){e.$$.dirty[0]===-1&&(ue.push(e),st(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function pe(e,t,n,l,o,u,_,d=[-1]){const f=he;ce(e);const a=e.$$={fragment:null,ctx:null,props:u,update:G,not_equal:o,bound:Re(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(f?f.$$.context:[])),callbacks:Re(),dirty:d,skip_bound:!1,root:t.target||f.$$.root};_&&_(a.root);let k=!1;if(a.ctx=n?n(e,t.props||{},(v,E,...m)=>{const h=m.length?m[0]:E;return a.ctx&&o(a.ctx[v],a.ctx[v]=h)&&(!a.skip_bound&&a.bound[v]&&a.bound[v](h),k&&ft(e,v)),E}):[],a.update(),k=!0,Q(a.before_update),a.fragment=l?l(a.ctx):!1,t.target){if(t.hydrate){const v=lt(t.target);a.fragment&&a.fragment.l(v),v.forEach(L)}else a.fragment&&a.fragment.c();t.intro&&V(e.$$.fragment),fe(e,t.target,t.anchor,t.customElement),xe()}ce(f)}class me{$destroy(){de(this,1),this.$destroy=G}$on(t,n){const l=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return l.push(n),()=>{const o=l.indexOf(n);o!==-1&&l.splice(o,1)}}$set(t){this.$$set&&!tt(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const te=[];function dt(e,t){return{subscribe:Le(e,t).subscribe}}function Le(e,t=G){let n;const l=new Set;function o(d){if(re(e,d)&&(e=d,n)){const f=!te.length;for(const a of l)a[1](),te.push(a,e);if(f){for(let a=0;a<te.length;a+=2)te[a][0](te[a+1]);te.length=0}}}function u(d){o(d(e))}function _(d,f=G){const a=[d,f];return l.add(a),l.size===1&&(n=t(o)||G),d(e),()=>{l.delete(a),l.size===0&&(n(),n=null)}}return{set:o,update:u,subscribe:_}}function _t(e,t,n){const l=!Array.isArray(e),o=l?[e]:e,u=t.length<2;return dt(n,_=>{let d=!1;const f=[];let a=0,k=G;const v=()=>{if(a)return;k();const m=t(l?f[0]:f,_);u?_(m):k=Xe(m)?m:G},E=o.map((m,h)=>Ze(m,B=>{f[h]=B,a&=~(1<<h),d&&v()},()=>{a|=1<<h}));return d=!0,v(),function(){Q(E),k()}})}const ht="http://localhost:8080";async function ge(e,t="GET",n=null){const l=await fetch(ht+"/api"+e,{method:t,body:n?JSON.stringify(n):null});if(!l.ok)throw new Error(l.statusText);return await l.json()}const K=Le({sortBy:"date",order:"asc",folder:"",tags:[],search:"",page:0}),pt=_t(K,e=>{const t=[];if(e.sortBy&&e.order){const n=`sort_by=${e.sortBy}&order=${e.order}`;t.push(n)}if(e.folder){const n=`folder=${e.folder}`;t.push(n)}if(e.search){const n=`search=${e.search}`;t.push(n)}if(e.tags.length>0){const l=e.tags.map(o=>`tags[]=${o}`).join("&");t.push(l)}return t.push(`page=${e.page}`),"?"+t.join("&")}),mt=()=>{const{set:e,subscribe:t,update:n}=Le([]);return{subscribe:t,fetch:async l=>{try{const o=await ge("/bookmarks"+l);e(o.data)}catch{return e([])}},add:(...l)=>{n(o=>[...o,...l])},delete:l=>{n(o=>{const u=o.findIndex(_=>_.id===l);return o.splice(u,1),o})}}},_e=mt();function Ge(e,t,n){const l=e.slice();return l[5]=t[n],l}function Fe(e){let t,n;return{c(){t=s("img"),r(t,"class","favicon"),qe(t.src,n=e[0].meta.favicon)||r(t,"src",n),r(t,"alt","Favicon")},m(l,o){I(l,t,o)},p(l,o){o&1&&!qe(t.src,n=l[0].meta.favicon)&&r(t,"src",n)},d(l){l&&L(t)}}}function He(e){let t,n=e[5].name+"",l;return{c(){t=s("div"),l=W(n),r(t,"class","tag")},m(o,u){I(o,t,u),i(t,l)},p(o,u){u&1&&n!==(n=o[5].name+"")&&oe(l,n)},d(o){o&&L(t)}}}function gt(e){let t,n,l,o,u=e[0].meta.title+"",_,d,f,a,k=e[0].url+"",v,E,m,h,B=e[0].meta.description+"",T,b,g,M,C,A,R,S,P,c=e[0].meta.favicon&&Fe(e),p=e[0].tags,$=[];for(let O=0;O<p.length;O+=1)$[O]=He(Ge(e,p,O));return{c(){t=s("div"),n=s("div"),c&&c.c(),l=y(),o=s("h3"),_=W(u),d=y(),f=s("small"),a=s("a"),v=W(k),m=y(),h=s("p"),T=W(B),b=y(),g=s("div"),M=s("button"),M.textContent="Delete",C=y(),A=s("div"),R=s("div");for(let O=0;O<$.length;O+=1)$[O].c();r(n,"class","row"),r(a,"href",E=e[0].url),ie(M,"background-color","var(--text-muted)"),ie(M,"color","var(--background)"),r(g,"class","m-l-auto"),r(R,"class","tags"),r(A,"class","footer row"),r(t,"class","bookmark")},m(O,U){I(O,t,U),i(t,n),c&&c.m(n,null),i(n,l),i(n,o),i(o,_),i(t,d),i(t,f),i(f,a),i(a,v),i(t,m),i(t,h),i(h,T),i(t,b),i(t,g),i(g,M),i(t,C),i(t,A),i(A,R);for(let D=0;D<$.length;D+=1)$[D].m(R,null);S||(P=[q(M,"click",e[1]),q(t,"mouseover",e[2]),q(t,"focus",e[2]),q(t,"mouseout",e[3]),q(t,"blur",e[3])],S=!0)},p(O,[U]){if(O[0].meta.favicon?c?c.p(O,U):(c=Fe(O),c.c(),c.m(n,l)):c&&(c.d(1),c=null),U&1&&u!==(u=O[0].meta.title+"")&&oe(_,u),U&1&&k!==(k=O[0].url+"")&&oe(v,k),U&1&&E!==(E=O[0].url)&&r(a,"href",E),U&1&&B!==(B=O[0].meta.description+"")&&oe(T,B),U&1){p=O[0].tags;let D;for(D=0;D<p.length;D+=1){const Y=Ge(O,p,D);$[D]?$[D].p(Y,U):($[D]=He(Y),$[D].c(),$[D].m(R,null))}for(;D<$.length;D+=1)$[D].d(1);$.length=p.length}},i:G,o:G,d(O){O&&L(t),c&&c.d(),Be($,O),S=!1,Q(P)}}}function vt(e,t,n){let{bookmark:l}=t;const o=async()=>{try{const d=await ge("/bookmarks/"+l.id,"DELETE");_e.delete(l.id)}catch(d){console.debug(d)}},u=()=>{},_=()=>{};return e.$$set=d=>{"bookmark"in d&&n(0,l=d.bookmark)},[l,o,u,_]}class bt extends me{constructor(t){super(),pe(this,t,vt,gt,re,{bookmark:0})}}function ze(e,t,n){const l=e.slice();return l[11]=t[n],l}function Ye(e){let t,n=e[11].name+"",l,o,u,_,d;function f(){return e[9](e[11])}return{c(){t=s("div"),l=W(n),o=y(),r(t,"class","tag"),r(t,"role","checkbox"),r(t,"style",u=`opacity: ${e[1].tags.includes(e[11].id)?1:.5}`)},m(a,k){I(a,t,k),i(t,l),i(t,o),_||(d=q(t,"click",f),_=!0)},p(a,k){e=a,k&1&&n!==(n=e[11].name+"")&&oe(l,n),k&3&&u!==(u=`opacity: ${e[1].tags.includes(e[11].id)?1:.5}`)&&r(t,"style",u)},d(a){a&&L(t),_=!1,d()}}}function kt(e){let t,n,l,o,u,_,d,f,a,k,v,E,m,h,B,T,b,g,M,C,A,R,S,P,c,p,$,O,U,D,Y,x,z,ve,X,se,H,J,be,ae,Te,Ie,ee=e[0],F=[];for(let w=0;w<ee.length;w+=1)F[w]=Ye(ze(e,ee,w));return{c(){t=s("input"),n=y(),l=s("div"),o=s("div"),u=s("strong"),u.textContent="SORT BY",_=y(),d=s("div"),f=s("input"),a=y(),k=s("label"),k.textContent="Title",v=y(),E=s("div"),m=s("input"),h=y(),B=s("label"),B.textContent="Date",T=y(),b=s("div"),g=s("strong"),g.textContent="ORDER",M=y(),C=s("div"),A=s("input"),R=y(),S=s("label"),S.textContent="Ascending",P=y(),c=s("div"),p=s("input"),$=y(),O=s("label"),O.textContent="Descending",U=y(),D=s("div"),Y=s("strong"),Y.textContent="FILTER BY TAGS",x=y(),z=s("button"),ve=W("Clear"),se=y(),H=s("div");for(let w=0;w<F.length;w+=1)F[w].c();J=y(),be=s("div"),ae=s("button"),ae.textContent="Open Settings",r(t,"type","text"),r(t,"id","search"),r(t,"name","search"),r(t,"placeholder","Search"),r(t,"class","m-b-2"),r(f,"type","radio"),r(f,"name","sortBy"),r(f,"id","title"),f.__value="title",f.value=f.__value,e[4][0].push(f),r(k,"for","title"),r(m,"type","radio"),r(m,"name","sortBy"),r(m,"id","date"),m.__value="date",m.value=m.__value,e[4][0].push(m),r(B,"for","date"),r(o,"class","col"),r(A,"type","radio"),r(A,"name","order"),r(A,"id","asc"),A.__value="asc",A.value=A.__value,e[4][1].push(A),r(S,"for","asc"),r(p,"type","radio"),r(p,"name","order"),r(p,"id","desc"),p.__value="desc",p.value=p.__value,e[4][1].push(p),r(O,"for","desc"),r(b,"class","col m-l-auto"),r(l,"class","row m-b-2"),r(z,"class","m-l-auto"),z.disabled=X=e[1].tags.length===0,r(D,"class","row"),r(H,"id","tags"),r(H,"class","m-b-2"),r(ae,"class","w-full")},m(w,N){I(w,t,N),le(t,e[1].search),I(w,n,N),I(w,l,N),i(l,o),i(o,u),i(o,_),i(o,d),i(d,f),f.checked=f.__value===e[1].sortBy,i(d,a),i(d,k),i(o,v),i(o,E),i(E,m),m.checked=m.__value===e[1].sortBy,i(E,h),i(E,B),i(l,T),i(l,b),i(b,g),i(b,M),i(b,C),i(C,A),A.checked=A.__value===e[1].order,i(C,R),i(C,S),i(b,P),i(b,c),i(c,p),p.checked=p.__value===e[1].order,i(c,$),i(c,O),I(w,U,N),I(w,D,N),i(D,Y),i(D,x),i(D,z),i(z,ve),I(w,se,N),I(w,H,N);for(let j=0;j<F.length;j+=1)F[j].m(H,null);I(w,J,N),I(w,be,N),i(be,ae),Te||(Ie=[q(t,"input",e[2]),q(f,"change",e[3]),q(m,"change",e[5]),q(A,"change",e[6]),q(p,"change",e[7]),q(z,"click",e[8]),q(ae,"click",e[10])],Te=!0)},p(w,[N]){if(N&2&&t.value!==w[1].search&&le(t,w[1].search),N&2&&(f.checked=f.__value===w[1].sortBy),N&2&&(m.checked=m.__value===w[1].sortBy),N&2&&(A.checked=A.__value===w[1].order),N&2&&(p.checked=p.__value===w[1].order),N&2&&X!==(X=w[1].tags.length===0)&&(z.disabled=X),N&3){ee=w[0];let j;for(j=0;j<ee.length;j+=1){const Me=ze(w,ee,j);F[j]?F[j].p(Me,N):(F[j]=Ye(Me),F[j].c(),F[j].m(H,null))}for(;j<F.length;j+=1)F[j].d(1);F.length=ee.length}},i:G,o:G,d(w){w&&L(t),w&&L(n),w&&L(l),e[4][0].splice(e[4][0].indexOf(f),1),e[4][0].splice(e[4][0].indexOf(m),1),e[4][1].splice(e[4][1].indexOf(A),1),e[4][1].splice(e[4][1].indexOf(p),1),w&&L(U),w&&L(D),w&&L(se),w&&L(H),Be(F,w),w&&L(J),w&&L(be),Te=!1,Q(Ie)}}}function yt(e,t,n){let l;Ee(e,K,h=>n(1,l=h));let o=[];De(async()=>{try{n(0,o=await ge("/tags"))}catch(h){console.debug(h)}});const u=[[],[]];function _(){l.search=this.value,K.set(l)}function d(){l.sortBy=this.__value,K.set(l)}function f(){l.sortBy=this.__value,K.set(l)}function a(){l.order=this.__value,K.set(l)}function k(){l.order=this.__value,K.set(l)}return[o,l,_,d,u,f,a,k,()=>{Ne(K,l.tags=[],l)},h=>{const B=l.tags;if(B.includes(h.id)){const T=B.indexOf(h);B.splice(T,1)}else B.push(h.id);Ne(K,l.tags=B,l)},()=>{document.getElementById("settings").showModal()}]}class $t extends me{constructor(t){super(),pe(this,t,yt,kt,re,{})}}function Je(e,t,n){const l=e.slice();return l[5]=t[n],l[6]=t,l[7]=n,l}function Ke(e){let t,n,l,o,u,_,d,f,a,k,v,E,m,h,B,T,b,g,M,C,A,R,S,P,c,p,$,O,U,D,Y,x,z;function ve(){e[2].call(d,e[6],e[7])}function X(){e[3].call(h,e[6],e[7])}function se(){e[4].call(P,e[6],e[7])}return{c(){t=s("div"),n=s("div"),l=s("div"),o=s("label"),o.textContent="Pattern",_=y(),d=s("input"),a=y(),k=s("div"),v=s("label"),v.textContent="Match detection",m=y(),h=s("select"),B=s("option"),B.textContent="Starts with (default)",T=s("option"),T.textContent="Regex",b=s("option"),b.textContent="Origin",g=s("option"),g.textContent="Domain",A=y(),R=s("div"),S=s("div"),P=s("input"),$=y(),O=s("label"),O.textContent="Save offline",U=y(),D=s("hr"),Y=y(),r(o,"for",u="pattern"+e[7]),r(d,"type","text"),r(d,"id",f="pattern"+e[7]),d.readOnly=!0,d.disabled=!0,r(l,"class","col"),ie(l,"flex-grow","3"),r(v,"for",E="matchDetection"+e[7]),B.__value="starts_with",B.value=B.__value,T.__value="regex",T.value=T.__value,b.__value="origin",b.value=b.__value,g.__value="domain",g.value=g.__value,r(h,"id",M="matchDetection"+e[7]),r(h,"name",C="matchDetection"+e[7]),e[5].matchDetection===void 0&&Oe(X),r(k,"class","col"),r(n,"class","row w-100"),r(P,"type","checkbox"),r(P,"id",c="saveOffline"+e[7]),r(P,"name",p="saveOffline"+e[7]),r(O,"for","'saveOffline' + i"),r(S,"class","row"),r(R,"class","row"),r(t,"class","url-action m-b-2")},m(H,J){I(H,t,J),i(t,n),i(n,l),i(l,o),i(l,_),i(l,d),le(d,e[5].pattern),i(n,a),i(n,k),i(k,v),i(k,m),i(k,h),i(h,B),i(h,T),i(h,b),i(h,g),Pe(h,e[5].matchDetection),i(t,A),i(t,R),i(R,S),i(S,P),le(P,e[5].shouldSaveOffline),i(S,$),i(S,O),i(t,U),i(t,D),i(t,Y),x||(z=[q(d,"input",ve),q(h,"change",X),q(P,"change",se)],x=!0)},p(H,J){e=H,J&1&&d.value!==e[5].pattern&&le(d,e[5].pattern),J&1&&Pe(h,e[5].matchDetection),J&1&&le(P,e[5].shouldSaveOffline)},d(H){H&&L(t),x=!1,Q(z)}}}function wt(e){let t,n,l,o,u,_,d,f,a,k,v,E,m,h,B,T=e[0].urlActions,b=[];for(let g=0;g<T.length;g+=1)b[g]=Ke(Je(e,T,g));return{c(){t=s("dialog"),n=s("header"),n.innerHTML="<h2>Settings</h2>",l=y(),o=s("div"),u=s("div"),_=s("h3"),_.textContent="Save pages offline",d=y(),f=s("input"),a=y(),k=s("h3"),k.textContent="URL Actions",v=y(),E=s("hr"),m=y();for(let g=0;g<b.length;g+=1)b[g].c();r(f,"class","m-l-auto"),r(f,"type","checkbox"),r(f,"name","saveOfflineDefault"),r(f,"id","saveOfflineDefault"),r(u,"class","row m-b-2"),r(o,"class","col"),ie(o,"width","600px"),ie(o,"max-height","700px"),r(t,"id","settings")},m(g,M){I(g,t,M),i(t,n),i(t,l),i(t,o),i(o,u),i(u,_),i(u,d),i(u,f),f.checked=e[0].shouldSaveOffline,i(o,a),i(o,k),i(o,v),i(o,E),i(o,m);for(let C=0;C<b.length;C+=1)b[C].m(o,null);h||(B=q(f,"change",e[1]),h=!0)},p(g,[M]){if(M&1&&(f.checked=g[0].shouldSaveOffline),M&1){T=g[0].urlActions;let C;for(C=0;C<T.length;C+=1){const A=Je(g,T,C);b[C]?b[C].p(A,M):(b[C]=Ke(A),b[C].c(),b[C].m(o,null))}for(;C<b.length;C+=1)b[C].d(1);b.length=T.length}},i:G,o:G,d(g){g&&L(t),Be(b,g),h=!1,B()}}}function St(e,t,n){let l={shouldSaveOffline:null,urlActions:[]};De(async()=>{n(0,l=await ge("/config"))});function o(){l.shouldSaveOffline=this.checked,n(0,l)}function u(f,a){f[a].pattern=this.value,n(0,l)}function _(f,a){f[a].matchDetection=ot(this),n(0,l)}function d(f,a){f[a].shouldSaveOffline=this.value,n(0,l)}return[l,o,u,_,d]}class Ot extends me{constructor(t){super(),pe(this,t,St,wt,re,{})}}function Bt(e){let t,n,l,o,u,_,d,f,a,k,v,E=e[0]==="SUBMITTING"?"Loading":"Add",m,h,B,T;return{c(){t=s("dialog"),n=s("header"),n.innerHTML="<h2>Add new bookmark</h2>",l=y(),o=s("form"),u=s("div"),u.innerHTML=`<label for="url"><strong>URL</strong><span class="red">*</span></label> 
			<input type="url" placeholder="Add new URL" name="url" id="url" required=""/>`,_=y(),d=s("div"),d.innerHTML='<label for="tags"><strong>Tags</strong></label>',f=y(),a=s("span"),k=y(),v=s("button"),m=W(E),r(u,"class","col m-b-1"),r(d,"class","col m-b-1"),r(a,"class","m-b-1 red"),r(a,"x-show","status === 'ERROR'"),r(a,"x-text","message"),r(v,"type","submit"),v.disabled=h=e[0]==="SUBMITTING",r(o,"class","m-l-auto col"),r(t,"id","add-bookmark-modal"),ie(t,"width","300px")},m(b,g){I(b,t,g),i(t,n),i(t,l),i(t,o),i(o,u),i(o,_),i(o,d),i(o,f),i(o,a),i(o,k),i(o,v),i(v,m),B||(T=q(o,"submit",nt(e[2])),B=!0)},p(b,[g]){g&1&&E!==(E=b[0]==="SUBMITTING"?"Loading":"Add")&&oe(m,E),g&1&&h!==(h=b[0]==="SUBMITTING")&&(v.disabled=h)},i:G,o:G,d(b){b&&L(t),B=!1,T()}}}function Tt(e,t,n){let l,o;return[l,o,async _=>{n(0,l="SUBMITTING");const d=new FormData(_.currentTarget),f=Object.fromEntries(d.entries());try{const a=[].filter(v=>v.selected).map(v=>+v.value),k=await ge("/bookmarks","POST",f);n(0,l="SUCCESS"),_e.add(k),document.getElementById("add-bookmark-modal").close()}catch{n(0,l="ERROR"),n(1,o="An error occurred")}}]}class Ct extends me{constructor(t){super(),pe(this,t,Tt,Bt,re,{})}}function Qe(e,t,n){const l=e.slice();return l[3]=t[n],l}function Ve(e){let t,n;return t=new bt({props:{bookmark:e[3]}}),{c(){Se(t.$$.fragment)},m(l,o){fe(t,l,o),n=!0},p(l,o){const u={};o&1&&(u.bookmark=l[3]),t.$set(u)},i(l){n||(V(t.$$.fragment,l),n=!0)},o(l){ne(t.$$.fragment,l),n=!1},d(l){de(t,l)}}}function Et(e){let t,n,l,o,u,_,d,f,a,k,v,E,m,h,B,T,b,g,M,C,A,R=e[0],S=[];for(let c=0;c<R.length;c+=1)S[c]=Ve(Qe(e,R,c));const P=c=>ne(S[c],1,1,()=>{S[c]=null});return h=new $t({}),T=new Ot({}),g=new Ct({}),{c(){t=s("nav"),n=s("div"),l=s("h1"),l.textContent="Rengoku",o=y(),u=s("button"),u.textContent="+ Add Bookmark",_=y(),d=s("hr"),f=y(),a=s("aside"),k=y(),v=s("main");for(let c=0;c<S.length;c+=1)S[c].c();E=y(),m=s("aside"),Se(h.$$.fragment),B=y(),Se(T.$$.fragment),b=y(),Se(g.$$.fragment),r(u,"class","m-l-auto"),r(n,"class","row"),r(a,"id","folders"),r(m,"id","filters")},m(c,p){I(c,t,p),i(t,n),i(n,l),i(n,o),i(n,u),i(t,_),i(t,d),I(c,f,p),I(c,a,p),I(c,k,p),I(c,v,p);for(let $=0;$<S.length;$+=1)S[$].m(v,null);I(c,E,p),I(c,m,p),fe(h,m,null),I(c,B,p),fe(T,c,p),I(c,b,p),fe(g,c,p),M=!0,C||(A=q(u,"click",e[2]),C=!0)},p(c,[p]){if(p&1){R=c[0];let $;for($=0;$<R.length;$+=1){const O=Qe(c,R,$);S[$]?(S[$].p(O,p),V(S[$],1)):(S[$]=Ve(O),S[$].c(),V(S[$],1),S[$].m(v,null))}for(ut(),$=R.length;$<S.length;$+=1)P($);ct()}},i(c){if(!M){for(let p=0;p<R.length;p+=1)V(S[p]);V(h.$$.fragment,c),V(T.$$.fragment,c),V(g.$$.fragment,c),M=!0}},o(c){S=S.filter(Boolean);for(let p=0;p<S.length;p+=1)ne(S[p]);ne(h.$$.fragment,c),ne(T.$$.fragment,c),ne(g.$$.fragment,c),M=!1},d(c){c&&L(t),c&&L(f),c&&L(a),c&&L(k),c&&L(v),Be(S,c),c&&L(E),c&&L(m),de(h),c&&L(B),de(T,c),c&&L(b),de(g,c),C=!1,A()}}}function At(e,t,n){let l,o;Ee(e,pt,_=>n(1,l=_)),Ee(e,_e,_=>n(0,o=_)),De(()=>_e.fetch(l));const u=()=>{document.getElementById("add-bookmark-modal").showModal()};return e.$$.update=()=>{e.$$.dirty&2&&_e.fetch(l)},[o,l,u]}class Dt extends me{constructor(t){super(),pe(this,t,At,Et,re,{})}}new Dt({target:document.body});
