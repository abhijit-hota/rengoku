const Nl=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function l(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=l(i);fetch(i.href,s)}};Nl();function A(){}function ye(t,e){for(const l in e)t[l]=e[l];return t}function Il(t){return t&&typeof t=="object"&&typeof t.then=="function"}function Xt(t){return t()}function mt(){return Object.create(null)}function ue(t){t.forEach(Xt)}function ut(t){return typeof t=="function"}function he(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let We;function gt(t,e){return We||(We=document.createElement("a")),We.href=e,t===We.href}function zl(t){return Object.keys(t).length===0}function Zt(t,...e){if(t==null)return A;const l=t.subscribe(...e);return l.unsubscribe?()=>l.unsubscribe():l}function Fe(t,e,l){t.$$.on_destroy.push(Zt(e,l))}function Ve(t,e,l,n){if(t){const i=xt(t,e,l,n);return t[0](i)}}function xt(t,e,l,n){return t[1]&&n?ye(l.ctx.slice(),t[1](n(e))):l.ctx}function Ge(t,e,l,n){if(t[2]&&n){const i=t[2](n(l));if(e.dirty===void 0)return i;if(typeof i=="object"){const s=[],o=Math.max(e.dirty.length,i.length);for(let u=0;u<o;u+=1)s[u]=e.dirty[u]|i[u];return s}return e.dirty|i}return e.dirty}function Ke(t,e,l,n,i,s){if(i){const o=xt(e,l,n,s);t.p(o,i)}}function Ye(t){if(t.ctx.length>32){const e=[],l=t.ctx.length/32;for(let n=0;n<l;n++)e[n]=-1;return e}return-1}function Ne(t){const e={};for(const l in t)l[0]!=="$"&&(e[l]=t[l]);return e}function xe(t){return t==null?"":t}function $e(t,e,l){return t.set(l),e}const $t=typeof window!="undefined";let bt=$t?()=>window.performance.now():()=>Date.now(),el=$t?t=>requestAnimationFrame(t):A;const qe=new Set;function tl(t){qe.forEach(e=>{e.c(t)||(qe.delete(e),e.f())}),qe.size!==0&&el(tl)}function Pl(t){let e;return qe.size===0&&el(tl),{promise:new Promise(l=>{qe.add(e={c:t,f:l})}),abort(){qe.delete(e)}}}function c(t,e){t.appendChild(e)}function I(t,e,l){t.insertBefore(e,l||null)}function N(t){t.parentNode.removeChild(t)}function Te(t,e){for(let l=0;l<t.length;l+=1)t[l]&&t[l].d(e)}function h(t){return document.createElement(t)}function De(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function re(t){return document.createTextNode(t)}function B(){return re(" ")}function Je(){return re("")}function U(t,e,l,n){return t.addEventListener(e,l,n),()=>t.removeEventListener(e,l,n)}function Me(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function Ul(t){return function(e){e.target===this&&t.call(this,e)}}function a(t,e,l){l==null?t.removeAttribute(e):t.getAttribute(e)!==l&&t.setAttribute(e,l)}function Ie(t,e){for(const l in e)a(t,l,e[l])}function Fl(t){return Array.from(t.childNodes)}function be(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function ce(t,e){t.value=e==null?"":e}function le(t,e,l,n){l===null?t.style.removeProperty(e):t.style.setProperty(e,l,n?"important":"")}function pt(t,e){for(let l=0;l<t.options.length;l+=1){const n=t.options[l];if(n.__value===e){n.selected=!0;return}}t.selectedIndex=-1}function Hl(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}function te(t,e,l){t.classList[l?"add":"remove"](e)}function Vl(t,e,{bubbles:l=!1,cancelable:n=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(t,l,n,e),i}let He;function Ce(t){He=t}function ft(){if(!He)throw new Error("Function called outside component initialization");return He}function at(t){ft().$$.on_mount.push(t)}function Gl(){const t=ft();return(e,l,{cancelable:n=!1}={})=>{const i=t.$$.callbacks[e];if(i){const s=Vl(e,l,{cancelable:n});return i.slice().forEach(o=>{o.call(t,s)}),!s.defaultPrevented}return!0}}function kt(t,e){const l=t.$$.callbacks[e.type];l&&l.slice().forEach(n=>n.call(this,e))}const Pe=[],je=[],Xe=[],nt=[],ll=Promise.resolve();let it=!1;function nl(){it||(it=!0,ll.then(dt))}function Kl(){return nl(),ll}function et(t){Xe.push(t)}function ct(t){nt.push(t)}const lt=new Set;let Qe=0;function dt(){const t=He;do{for(;Qe<Pe.length;){const e=Pe[Qe];Qe++,Ce(e),Yl(e.$$)}for(Ce(null),Pe.length=0,Qe=0;je.length;)je.pop()();for(let e=0;e<Xe.length;e+=1){const l=Xe[e];lt.has(l)||(lt.add(l),l())}Xe.length=0}while(Pe.length);for(;nt.length;)nt.pop()();it=!1,lt.clear(),Ce(t)}function Yl(t){if(t.fragment!==null){t.update(),ue(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(et)}}const Ze=new Set;let Ee;function me(){Ee={r:0,c:[],p:Ee}}function ge(){Ee.r||ue(Ee.c),Ee=Ee.p}function D(t,e){t&&t.i&&(Ze.delete(t),t.i(e))}function F(t,e,l,n){if(t&&t.o){if(Ze.has(t))return;Ze.add(t),Ee.c.push(()=>{Ze.delete(t),n&&(l&&t.d(1),n())}),t.o(e)}}function ot(t,e){const l=e.token={};function n(i,s,o,u){if(e.token!==l)return;e.resolved=u;let r=e.ctx;o!==void 0&&(r=r.slice(),r[o]=u);const f=i&&(e.current=i)(r);let _=!1;e.block&&(e.blocks?e.blocks.forEach((C,S)=>{S!==s&&C&&(me(),F(C,1,1,()=>{e.blocks[S]===C&&(e.blocks[S]=null)}),ge())}):e.block.d(1),f.c(),D(f,1),f.m(e.mount(),e.anchor),_=!0),e.block=f,e.blocks&&(e.blocks[s]=f),_&&dt()}if(Il(t)){const i=ft();if(t.then(s=>{Ce(i),n(e.then,1,e.value,s),Ce(null)},s=>{if(Ce(i),n(e.catch,2,e.error,s),Ce(null),!e.hasCatch)throw s}),e.current!==e.pending)return n(e.pending,0),!0}else{if(e.current!==e.then)return n(e.then,1,e.value,t),!0;e.resolved=t}}function st(t,e,l){const n=e.slice(),{resolved:i}=t;t.current===t.then&&(n[t.value]=i),t.current===t.catch&&(n[t.error]=i),t.block.p(n,l)}function _t(t,e){const l={},n={},i={$$scope:1};let s=t.length;for(;s--;){const o=t[s],u=e[s];if(u){for(const r in o)r in u||(n[r]=1);for(const r in u)i[r]||(l[r]=u[r],i[r]=1);t[s]=u}else for(const r in o)i[r]=1}for(const o in n)o in l||(l[o]=void 0);return l}function ht(t,e,l){const n=t.$$.props[e];n!==void 0&&(t.$$.bound[n]=l,l(t.$$.ctx[n]))}function de(t){t&&t.c()}function fe(t,e,l,n){const{fragment:i,on_mount:s,on_destroy:o,after_update:u}=t.$$;i&&i.m(e,l),n||et(()=>{const r=s.map(Xt).filter(ut);o?o.push(...r):ue(r),t.$$.on_mount=[]}),u.forEach(et)}function ae(t,e){const l=t.$$;l.fragment!==null&&(ue(l.on_destroy),l.fragment&&l.fragment.d(e),l.on_destroy=l.fragment=null,l.ctx=[])}function Jl(t,e){t.$$.dirty[0]===-1&&(Pe.push(t),nl(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function pe(t,e,l,n,i,s,o,u=[-1]){const r=He;Ce(t);const f=t.$$={fragment:null,ctx:null,props:s,update:A,not_equal:i,bound:mt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(r?r.$$.context:[])),callbacks:mt(),dirty:u,skip_bound:!1,root:e.target||r.$$.root};o&&o(f.root);let _=!1;if(f.ctx=l?l(t,e.props||{},(C,S,...b)=>{const p=b.length?b[0]:S;return f.ctx&&i(f.ctx[C],f.ctx[C]=p)&&(!f.skip_bound&&f.bound[C]&&f.bound[C](p),_&&Jl(t,C)),S}):[],f.update(),_=!0,ue(f.before_update),f.fragment=n?n(f.ctx):!1,e.target){if(e.hydrate){const C=Fl(e.target);f.fragment&&f.fragment.l(C),C.forEach(N)}else f.fragment&&f.fragment.c();e.intro&&D(t.$$.fragment),fe(t,e.target,e.anchor,e.customElement),dt()}Ce(r)}class ke{$destroy(){ae(this,1),this.$destroy=A}$on(e,l){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(l),()=>{const i=n.indexOf(l);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!zl(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Re=[];function Wl(t,e){return{subscribe:tt(t,e).subscribe}}function tt(t,e=A){let l;const n=new Set;function i(u){if(he(t,u)&&(t=u,l)){const r=!Re.length;for(const f of n)f[1](),Re.push(f,t);if(r){for(let f=0;f<Re.length;f+=2)Re[f][0](Re[f+1]);Re.length=0}}}function s(u){i(u(t))}function o(u,r=A){const f=[u,r];return n.add(f),n.size===1&&(l=e(i)||A),u(t),()=>{n.delete(f),n.size===0&&(l(),l=null)}}return{set:i,update:s,subscribe:o}}function Ql(t,e,l){const n=!Array.isArray(t),i=n?[t]:t,s=e.length<2;return Wl(l,o=>{let u=!1;const r=[];let f=0,_=A;const C=()=>{if(f)return;_();const b=e(n?r[0]:r,o);s?o(b):_=ut(b)?b:A},S=i.map((b,p)=>Zt(b,m=>{r[p]=m,f&=~(1<<p),u&&C()},()=>{f|=1<<p}));return u=!0,C(),function(){ue(S),_()}})}const Xl="http://localhost:8080";async function Se(t,e="GET",l=null){const n=await fetch(Xl+"/api"+t,{method:e,body:l?JSON.stringify(l):null});if(!n.ok)throw new Error(n.statusText);return await n.json()}const _e=tt({sortBy:"date",order:"asc",folder:"",tags:[],search:"",page:0}),Zl=Ql(_e,t=>{const e=[];if(t.sortBy&&t.order){const l=`sort_by=${t.sortBy}&order=${t.order}`;e.push(l)}if(t.folder){const l=`folder=${t.folder}`;e.push(l)}if(t.search){const l=`search=${t.search}`;e.push(l)}if(t.tags.length>0){const n=t.tags.map(i=>`tags[]=${i}`).join("&");e.push(n)}return e.push(`page=${t.page}`),"?"+e.join("&")}),xl=()=>{const{set:t,subscribe:e,update:l}=tt([]);return{subscribe:e,fetch:async n=>{try{const i=await Se("/bookmarks"+n);t(i.data)}catch{return t([])}},add:(...n)=>{l(i=>[...i,...n])},delete:n=>{l(i=>{const s=i.findIndex(o=>o.id===n);return i.splice(s,1),i})}}},Ue=xl();function vt(t,e,l){const n=t.slice();return n[5]=e[l],n}function wt(t){let e,l;return{c(){e=h("img"),a(e,"class","favicon"),gt(e.src,l=t[0].meta.favicon)||a(e,"src",l),a(e,"alt","Favicon")},m(n,i){I(n,e,i)},p(n,i){i&1&&!gt(e.src,l=n[0].meta.favicon)&&a(e,"src",l)},d(n){n&&N(e)}}}function yt(t){let e,l=t[5].name+"",n;return{c(){e=h("div"),n=re(l),a(e,"class","tag")},m(i,s){I(i,e,s),c(e,n)},p(i,s){s&1&&l!==(l=i[5].name+"")&&be(n,l)},d(i){i&&N(e)}}}function $l(t){let e,l,n,i,s=t[0].meta.title+"",o,u,r,f,_=t[0].url+"",C,S,b,p,m=t[0].meta.description+"",k,y,O,j,R,H,Q,K,V,L=t[0].meta.favicon&&wt(t),E=t[0].tags,z=[];for(let w=0;w<E.length;w+=1)z[w]=yt(vt(t,E,w));return{c(){e=h("div"),l=h("div"),L&&L.c(),n=B(),i=h("h3"),o=re(s),u=B(),r=h("small"),f=h("a"),C=re(_),b=B(),p=h("p"),k=re(m),y=B(),O=h("div"),j=h("button"),j.textContent="Delete",R=B(),H=h("div"),Q=h("div");for(let w=0;w<z.length;w+=1)z[w].c();a(l,"class","row"),a(f,"href",S=t[0].url),le(j,"background-color","var(--text-muted)"),le(j,"color","var(--background)"),a(O,"class","m-l-auto"),a(Q,"class","tags"),a(H,"class","footer row"),a(e,"class","bookmark")},m(w,q){I(w,e,q),c(e,l),L&&L.m(l,null),c(l,n),c(l,i),c(i,o),c(e,u),c(e,r),c(r,f),c(f,C),c(e,b),c(e,p),c(p,k),c(e,y),c(e,O),c(O,j),c(e,R),c(e,H),c(H,Q);for(let g=0;g<z.length;g+=1)z[g].m(Q,null);K||(V=[U(j,"click",t[1]),U(e,"mouseover",t[2]),U(e,"focus",t[2]),U(e,"mouseout",t[3]),U(e,"blur",t[3])],K=!0)},p(w,[q]){if(w[0].meta.favicon?L?L.p(w,q):(L=wt(w),L.c(),L.m(l,n)):L&&(L.d(1),L=null),q&1&&s!==(s=w[0].meta.title+"")&&be(o,s),q&1&&_!==(_=w[0].url+"")&&be(C,_),q&1&&S!==(S=w[0].url)&&a(f,"href",S),q&1&&m!==(m=w[0].meta.description+"")&&be(k,m),q&1){E=w[0].tags;let g;for(g=0;g<E.length;g+=1){const T=vt(w,E,g);z[g]?z[g].p(T,q):(z[g]=yt(T),z[g].c(),z[g].m(Q,null))}for(;g<z.length;g+=1)z[g].d(1);z.length=E.length}},i:A,o:A,d(w){w&&N(e),L&&L.d(),Te(z,w),K=!1,ue(V)}}}function en(t,e,l){let{bookmark:n}=e;const i=async()=>{try{const u=await Se("/bookmarks/"+n.id,"DELETE");Ue.delete(n.id)}catch(u){console.debug(u)}},s=()=>{},o=()=>{};return t.$$set=u=>{"bookmark"in u&&l(0,n=u.bookmark)},[n,i,s,o]}class tn extends ke{constructor(e){super(),pe(this,e,en,$l,he,{bookmark:0})}}function Ct(t,e,l){const n=t.slice();return n[11]=e[l],n}function St(t){let e,l=t[11].name+"",n,i,s,o,u;function r(){return t[9](t[11])}return{c(){e=h("div"),n=re(l),i=B(),a(e,"class","tag"),a(e,"role","checkbox"),a(e,"style",s=`opacity: ${t[1].tags.includes(t[11].id)?1:.5}`)},m(f,_){I(f,e,_),c(e,n),c(e,i),o||(u=U(e,"click",r),o=!0)},p(f,_){t=f,_&1&&l!==(l=t[11].name+"")&&be(n,l),_&3&&s!==(s=`opacity: ${t[1].tags.includes(t[11].id)?1:.5}`)&&a(e,"style",s)},d(f){f&&N(e),o=!1,u()}}}function ln(t){let e,l,n,i,s,o,u,r,f,_,C,S,b,p,m,k,y,O,j,R,H,Q,K,V,L,E,z,w,q,g,T,W,x,ve,ee,Y,ne,Z,v,M,ie,G,oe=t[0],$=[];for(let P=0;P<oe.length;P+=1)$[P]=St(Ct(t,oe,P));return{c(){e=h("input"),l=B(),n=h("div"),i=h("div"),s=h("strong"),s.textContent="SORT BY",o=B(),u=h("div"),r=h("input"),f=B(),_=h("label"),_.textContent="Title",C=B(),S=h("div"),b=h("input"),p=B(),m=h("label"),m.textContent="Date",k=B(),y=h("div"),O=h("strong"),O.textContent="ORDER",j=B(),R=h("div"),H=h("input"),Q=B(),K=h("label"),K.textContent="Ascending",V=B(),L=h("div"),E=h("input"),z=B(),w=h("label"),w.textContent="Descending",q=B(),g=h("div"),T=h("strong"),T.textContent="FILTER BY TAGS",W=B(),x=h("button"),ve=re("Clear"),Y=B(),ne=h("div");for(let P=0;P<$.length;P+=1)$[P].c();Z=B(),v=h("div"),M=h("button"),M.textContent="Open Settings",a(e,"type","text"),a(e,"id","search"),a(e,"name","search"),a(e,"placeholder","Search"),a(e,"class","m-b-2"),a(r,"type","radio"),a(r,"name","sortBy"),a(r,"id","title"),r.__value="title",r.value=r.__value,t[4][0].push(r),a(_,"for","title"),a(b,"type","radio"),a(b,"name","sortBy"),a(b,"id","date"),b.__value="date",b.value=b.__value,t[4][0].push(b),a(m,"for","date"),a(i,"class","col"),a(H,"type","radio"),a(H,"name","order"),a(H,"id","asc"),H.__value="asc",H.value=H.__value,t[4][1].push(H),a(K,"for","asc"),a(E,"type","radio"),a(E,"name","order"),a(E,"id","desc"),E.__value="desc",E.value=E.__value,t[4][1].push(E),a(w,"for","desc"),a(y,"class","col m-l-auto"),a(n,"class","row m-b-2"),a(x,"class","m-l-auto"),x.disabled=ee=t[1].tags.length===0,a(g,"class","row"),a(ne,"id","tags"),a(ne,"class","m-b-2"),a(M,"class","w-full")},m(P,X){I(P,e,X),ce(e,t[1].search),I(P,l,X),I(P,n,X),c(n,i),c(i,s),c(i,o),c(i,u),c(u,r),r.checked=r.__value===t[1].sortBy,c(u,f),c(u,_),c(i,C),c(i,S),c(S,b),b.checked=b.__value===t[1].sortBy,c(S,p),c(S,m),c(n,k),c(n,y),c(y,O),c(y,j),c(y,R),c(R,H),H.checked=H.__value===t[1].order,c(R,Q),c(R,K),c(y,V),c(y,L),c(L,E),E.checked=E.__value===t[1].order,c(L,z),c(L,w),I(P,q,X),I(P,g,X),c(g,T),c(g,W),c(g,x),c(x,ve),I(P,Y,X),I(P,ne,X);for(let se=0;se<$.length;se+=1)$[se].m(ne,null);I(P,Z,X),I(P,v,X),c(v,M),ie||(G=[U(e,"input",t[2]),U(r,"change",t[3]),U(b,"change",t[5]),U(H,"change",t[6]),U(E,"change",t[7]),U(x,"click",t[8]),U(M,"click",t[10])],ie=!0)},p(P,[X]){if(X&2&&e.value!==P[1].search&&ce(e,P[1].search),X&2&&(r.checked=r.__value===P[1].sortBy),X&2&&(b.checked=b.__value===P[1].sortBy),X&2&&(H.checked=H.__value===P[1].order),X&2&&(E.checked=E.__value===P[1].order),X&2&&ee!==(ee=P[1].tags.length===0)&&(x.disabled=ee),X&3){oe=P[0];let se;for(se=0;se<oe.length;se+=1){const Be=Ct(P,oe,se);$[se]?$[se].p(Be,X):($[se]=St(Be),$[se].c(),$[se].m(ne,null))}for(;se<$.length;se+=1)$[se].d(1);$.length=oe.length}},i:A,o:A,d(P){P&&N(e),P&&N(l),P&&N(n),t[4][0].splice(t[4][0].indexOf(r),1),t[4][0].splice(t[4][0].indexOf(b),1),t[4][1].splice(t[4][1].indexOf(H),1),t[4][1].splice(t[4][1].indexOf(E),1),P&&N(q),P&&N(g),P&&N(Y),P&&N(ne),Te($,P),P&&N(Z),P&&N(v),ie=!1,ue(G)}}}function nn(t,e,l){let n;Fe(t,_e,p=>l(1,n=p));let i=[];at(async()=>{try{l(0,i=await Se("/tags"))}catch(p){console.debug(p)}});const s=[[],[]];function o(){n.search=this.value,_e.set(n)}function u(){n.sortBy=this.__value,_e.set(n)}function r(){n.sortBy=this.__value,_e.set(n)}function f(){n.order=this.__value,_e.set(n)}function _(){n.order=this.__value,_e.set(n)}return[i,n,o,u,s,r,f,_,()=>{$e(_e,n.tags=[],n)},p=>{const m=n.tags;if(m.includes(p.id)){const k=m.indexOf(p);m.splice(k,1)}else m.push(p.id);$e(_e,n.tags=m,n)},()=>{document.getElementById("settings").showModal()}]}class on extends ke{constructor(e){super(),pe(this,e,nn,ln,he,{})}}function Ot(t,e,l){const n=t.slice();return n[5]=e[l],n[6]=e,n[7]=l,n}function Tt(t){let e,l,n,i,s,o,u,r,f,_,C,S,b,p,m,k,y,O,j,R,H,Q,K,V,L,E,z,w,q,g,T,W,x;function ve(){t[2].call(u,t[6],t[7])}function ee(){t[3].call(p,t[6],t[7])}function Y(){t[4].call(V,t[6],t[7])}return{c(){e=h("div"),l=h("div"),n=h("div"),i=h("label"),i.textContent="Pattern",o=B(),u=h("input"),f=B(),_=h("div"),C=h("label"),C.textContent="Match detection",b=B(),p=h("select"),m=h("option"),m.textContent="Starts with (default)",k=h("option"),k.textContent="Regex",y=h("option"),y.textContent="Origin",O=h("option"),O.textContent="Domain",H=B(),Q=h("div"),K=h("div"),V=h("input"),z=B(),w=h("label"),w.textContent="Save offline",q=B(),g=h("hr"),T=B(),a(i,"for",s="pattern"+t[7]),a(u,"type","text"),a(u,"id",r="pattern"+t[7]),u.readOnly=!0,u.disabled=!0,a(n,"class","col"),le(n,"flex-grow","3"),a(C,"for",S="matchDetection"+t[7]),m.__value="starts_with",m.value=m.__value,k.__value="regex",k.value=k.__value,y.__value="origin",y.value=y.__value,O.__value="domain",O.value=O.__value,a(p,"id",j="matchDetection"+t[7]),a(p,"name",R="matchDetection"+t[7]),t[5].matchDetection===void 0&&et(ee),a(_,"class","col"),a(l,"class","row w-100"),a(V,"type","checkbox"),a(V,"id",L="saveOffline"+t[7]),a(V,"name",E="saveOffline"+t[7]),a(w,"for","'saveOffline' + i"),a(K,"class","row"),a(Q,"class","row"),a(e,"class","url-action m-b-2")},m(ne,Z){I(ne,e,Z),c(e,l),c(l,n),c(n,i),c(n,o),c(n,u),ce(u,t[5].pattern),c(l,f),c(l,_),c(_,C),c(_,b),c(_,p),c(p,m),c(p,k),c(p,y),c(p,O),pt(p,t[5].matchDetection),c(e,H),c(e,Q),c(Q,K),c(K,V),ce(V,t[5].shouldSaveOffline),c(K,z),c(K,w),c(e,q),c(e,g),c(e,T),W||(x=[U(u,"input",ve),U(p,"change",ee),U(V,"change",Y)],W=!0)},p(ne,Z){t=ne,Z&1&&u.value!==t[5].pattern&&ce(u,t[5].pattern),Z&1&&pt(p,t[5].matchDetection),Z&1&&ce(V,t[5].shouldSaveOffline)},d(ne){ne&&N(e),W=!1,ue(x)}}}function sn(t){let e,l,n,i,s,o,u,r,f,_,C,S,b,p,m,k=t[0].urlActions,y=[];for(let O=0;O<k.length;O+=1)y[O]=Tt(Ot(t,k,O));return{c(){e=h("dialog"),l=h("header"),l.innerHTML="<h2>Settings</h2>",n=B(),i=h("div"),s=h("div"),o=h("h3"),o.textContent="Save pages offline",u=B(),r=h("input"),f=B(),_=h("h3"),_.textContent="URL Actions",C=B(),S=h("hr"),b=B();for(let O=0;O<y.length;O+=1)y[O].c();a(r,"class","m-l-auto"),a(r,"type","checkbox"),a(r,"name","saveOfflineDefault"),a(r,"id","saveOfflineDefault"),a(s,"class","row m-b-2"),a(i,"class","col"),le(i,"width","600px"),le(i,"max-height","700px"),a(e,"id","settings")},m(O,j){I(O,e,j),c(e,l),c(e,n),c(e,i),c(i,s),c(s,o),c(s,u),c(s,r),r.checked=t[0].shouldSaveOffline,c(i,f),c(i,_),c(i,C),c(i,S),c(i,b);for(let R=0;R<y.length;R+=1)y[R].m(i,null);p||(m=U(r,"change",t[1]),p=!0)},p(O,[j]){if(j&1&&(r.checked=O[0].shouldSaveOffline),j&1){k=O[0].urlActions;let R;for(R=0;R<k.length;R+=1){const H=Ot(O,k,R);y[R]?y[R].p(H,j):(y[R]=Tt(H),y[R].c(),y[R].m(i,null))}for(;R<y.length;R+=1)y[R].d(1);y.length=k.length}},i:A,o:A,d(O){O&&N(e),Te(y,O),p=!1,m()}}}function rn(t,e,l){let n={shouldSaveOffline:null,urlActions:[]};at(async()=>{l(0,n=await Se("/config"))});function i(){n.shouldSaveOffline=this.checked,l(0,n)}function s(r,f){r[f].pattern=this.value,l(0,n)}function o(r,f){r[f].matchDetection=Hl(this),l(0,n)}function u(r,f){r[f].shouldSaveOffline=this.value,l(0,n)}return[n,i,s,o,u]}class un extends ke{constructor(e){super(),pe(this,e,rn,sn,he,{})}}function fn(t){let e,l=`${t[0]} transparent ${t[0]}
  ${t[0]}`;return{c(){e=h("div"),le(e,"--duration",t[1]),a(e,"class","svelte-66wdl1"),le(e,"border-color",l,!1),le(e,"width",t[2],!1),le(e,"height",t[2],!1)},m(n,i){I(n,e,i)},p(n,[i]){i&2&&le(e,"--duration",n[1]),i&1&&l!==(l=`${n[0]} transparent ${n[0]}
  ${n[0]}`)&&le(e,"border-color",l,!1),i&4&&le(e,"width",n[2],!1),i&4&&le(e,"height",n[2],!1)},i:A,o:A,d(n){n&&N(e)}}}function an(t,e,l){let{color:n="cornflowerblue"}=e,{duration:i="1.5s"}=e,{size:s="1em"}=e;return t.$$set=o=>{"color"in o&&l(0,n=o.color),"duration"in o&&l(1,i=o.duration),"size"in o&&l(2,s=o.size)},[n,i,s]}class cn extends ke{constructor(e){super(),pe(this,e,an,fn,he,{color:0,duration:1,size:2})}}function dn(t){let e,l,n=[t[0],{fill:"currentColor"},{viewBox:"0 0 16 16"}],i={};for(let s=0;s<n.length;s+=1)i=ye(i,n[s]);return{c(){e=De("svg"),l=De("path"),a(l,"d","M3.646 9.146a.5.5 0 0 1 .708 0L8 12.793l3.646-3.647a.5.5 0 0 1 .708.708l-4 4a.5.5 0 0 1-.708 0l-4-4a.5.5 0 0 1 0-.708zm0-2.292a.5.5 0 0 0 .708 0L8 3.207l3.646 3.647a.5.5 0 0 0 .708-.708l-4-4a.5.5 0 0 0-.708 0l-4 4a.5.5 0 0 0 0 .708z"),Ie(e,i)},m(s,o){I(s,e,o),c(e,l)},p(s,[o]){Ie(e,i=_t(n,[o&1&&s[0],{fill:"currentColor"},{viewBox:"0 0 16 16"}]))},i:A,o:A,d(s){s&&N(e)}}}function _n(t,e,l){return t.$$set=n=>{l(0,e=ye(ye({},e),Ne(n)))},e=Ne(e),[e]}class hn extends ke{constructor(e){super(),pe(this,e,_n,dn,he,{})}}function mn(t){let e,l,n=[t[0],{viewBox:"0 0 20 20"},{fill:"currentColor"}],i={};for(let s=0;s<n.length;s+=1)i=ye(i,n[s]);return{c(){e=De("svg"),l=De("path"),a(l,"d","M10 1.6a8.4 8.4 0 100 16.8 8.4 8.4 0 000-16.8zm4.789 11.461L13.06 14.79 10 11.729l-3.061 3.06L5.21 13.06 8.272 10 5.211 6.939 6.94 5.211 10 8.271l3.061-3.061 1.729 1.729L11.728 10l3.061 3.061z"),Ie(e,i)},m(s,o){I(s,e,o),c(e,l)},p(s,[o]){Ie(e,i=_t(n,[o&1&&s[0],{viewBox:"0 0 20 20"},{fill:"currentColor"}]))},i:A,o:A,d(s){s&&N(e)}}}function gn(t,e,l){return t.$$set=n=>{l(0,e=ye(ye({},e),Ne(n)))},e=Ne(e),[e]}class il extends ke{constructor(e){super(),pe(this,e,gn,mn,he,{})}}function bn(t){let e,l,n,i=[t[0],{viewBox:"0 0 24 24"},{fill:"currentColor"}],s={};for(let o=0;o<i.length;o+=1)s=ye(s,i[o]);return{c(){e=De("svg"),l=De("path"),n=De("path"),a(l,"fill","none"),a(l,"d","M0 0h24v24H0V0z"),a(n,"d","M14.48 11.95c.17.02.34.05.52.05 2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4c0 .18.03.35.05.52l3.43 3.43zm2.21 2.21L22.53 20H23v-2c0-2.14-3.56-3.5-6.31-3.84zM0 3.12l4 4V10H1v2h3v3h2v-3h2.88l2.51 2.51C9.19 15.11 7 16.3 7 18v2h9.88l4 4 1.41-1.41L1.41 1.71 0 3.12zM6.88 10H6v-.88l.88.88z"),Ie(e,s)},m(o,u){I(o,e,u),c(e,l),c(e,n)},p(o,[u]){Ie(e,s=_t(i,[u&1&&o[0],{viewBox:"0 0 24 24"},{fill:"currentColor"}]))},i:A,o:A,d(o){o&&N(e)}}}function pn(t,e,l){return t.$$set=n=>{l(0,e=ye(ye({},e),Ne(n)))},e=Ne(e),[e]}class kn extends ke{constructor(e){super(),pe(this,e,pn,bn,he,{})}}function Mt(t){return Object.prototype.toString.call(t)==="[object Date]"}function rt(t,e,l,n){if(typeof l=="number"||Mt(l)){const i=n-l,s=(l-e)/(t.dt||1/60),o=t.opts.stiffness*i,u=t.opts.damping*s,r=(o-u)*t.inv_mass,f=(s+r)*t.dt;return Math.abs(f)<t.opts.precision&&Math.abs(i)<t.opts.precision?n:(t.settled=!1,Mt(l)?new Date(l.getTime()+f):l+f)}else{if(Array.isArray(l))return l.map((i,s)=>rt(t,e[s],l[s],n[s]));if(typeof l=="object"){const i={};for(const s in l)i[s]=rt(t,e[s],l[s],n[s]);return i}else throw new Error(`Cannot spring ${typeof l} values`)}}function vn(t,e={}){const l=tt(t),{stiffness:n=.15,damping:i=.8,precision:s=.01}=e;let o,u,r,f=t,_=t,C=1,S=0,b=!1;function p(k,y={}){_=k;const O=r={};if(t==null||y.hard||m.stiffness>=1&&m.damping>=1)return b=!0,o=bt(),f=k,l.set(t=_),Promise.resolve();if(y.soft){const j=y.soft===!0?.5:+y.soft;S=1/(j*60),C=0}return u||(o=bt(),b=!1,u=Pl(j=>{if(b)return b=!1,u=null,!1;C=Math.min(C+S,1);const R={inv_mass:C,opts:m,settled:!0,dt:(j-o)*60/1e3},H=rt(R,f,t,_);return o=j,f=t,l.set(t=H),R.settled&&(u=null),!R.settled})),new Promise(j=>{u.promise.then(()=>{O===r&&j()})})}const m={set:p,update:(k,y)=>p(k(_,t),y),subscribe:l.subscribe,stiffness:n,damping:i,precision:s};return m}function wn(t){let e,l=`rotate(${t[0].angle}deg) scale(${t[0].scale}) translate(${t[0].dx}px,
  ${t[0].dy}px)`,n;const i=t[11].default,s=Ve(i,t,t[10],null);return{c(){e=h("span"),s&&s.c(),le(e,"transform",l,!1)},m(o,u){I(o,e,u),s&&s.m(e,null),n=!0},p(o,[u]){s&&s.p&&(!n||u&1024)&&Ke(s,i,o,o[10],n?Ge(i,o[10],u,null):Ye(o[10]),null),u&1&&l!==(l=`rotate(${o[0].angle}deg) scale(${o[0].scale}) translate(${o[0].dx}px,
  ${o[0].dy}px)`)&&le(e,"transform",l,!1)},i(o){n||(D(s,o),n=!0)},o(o){F(s,o),n=!1},d(o){o&&N(e),s&&s.d(o)}}}function yn(t,e,l){let n,{$$slots:i={},$$scope:s}=e,{wiggle:o=!1}=e,{angle:u=0}=e,{scale:r=1}=e,{dx:f=0}=e,{dy:_=0}=e,{duration:C=200}=e,{stiffness:S=.05}=e,{damping:b=.1}=e,p={angle:0,scale:1,dx:0,dy:0},m=vn(p,{stiffness:S,damping:b});return Fe(t,m,k=>l(0,n=k)),t.$$set=k=>{"wiggle"in k&&l(2,o=k.wiggle),"angle"in k&&l(3,u=k.angle),"scale"in k&&l(4,r=k.scale),"dx"in k&&l(5,f=k.dx),"dy"in k&&l(6,_=k.dy),"duration"in k&&l(7,C=k.duration),"stiffness"in k&&l(8,S=k.stiffness),"damping"in k&&l(9,b=k.damping),"$$scope"in k&&l(10,s=k.$$scope)},t.$$.update=()=>{t.$$.dirty&132&&o&&setTimeout(()=>l(2,o=!1),C),t.$$.dirty&124&&m.set(o?{scale:r,angle:u,dx:f,dy:_}:p)},[n,m,o,u,r,f,_,C,S,b,s,i]}class Cn extends ke{constructor(e){super(),pe(this,e,yn,wn,he,{wiggle:2,angle:3,scale:4,dx:5,dy:6,duration:7,stiffness:8,damping:9})}}function Bt(t,e,l){const n=t.slice();n[76]=e[l],n[82]=l;const i=n[76]instanceof Object?n[76]:{label:n[76]};n[77]=i.label,n[29]=i.disabled!==void 0?i.disabled:null,n[78]=i.title!==void 0?i.title:null,n[79]=i.selectedTitle!==void 0?i.selectedTitle:null,n[30]=i.disabledTitle!==void 0?i.disabledTitle:n[23];const s=n[6]&&n[36](n[6])===n[77];return n[80]=s,n}const Sn=t=>({option:t[1]&16}),At=t=>({option:t[76],idx:t[82]}),On=t=>({}),Et=t=>({}),Tn=t=>({}),Dt=t=>({});function jt(t,e,l){const n=t.slice();return n[76]=e[l],n[82]=l,n}const Mn=t=>({option:t[0]&2}),Lt=t=>({option:t[76],idx:t[82]});function Bn(t){let e=t[36](t[76])+"",l;return{c(){l=re(e)},m(n,i){I(n,l,i)},p(n,i){i[0]&2&&e!==(e=n[36](n[76])+"")&&be(l,e)},d(n){n&&N(l)}}}function Rt(t){let e,l,n,i,s,o;l=new il({props:{width:"15px"}});function u(){return t[54](t[76])}function r(){return t[55](t[76])}return{c(){e=h("button"),de(l.$$.fragment),a(e,"type","button"),a(e,"title",n=t[21]+" "+t[36](t[76])),a(e,"class","svelte-18jo2l6")},m(f,_){I(f,e,_),fe(l,e,null),i=!0,s||(o=[U(e,"mouseup",Me(u)),U(e,"keydown",function(){ut(t[42](r))&&t[42](r).apply(this,arguments)})],s=!0)},p(f,_){t=f,(!i||_[0]&2097154&&n!==(n=t[21]+" "+t[36](t[76])))&&a(e,"title",n)},i(f){i||(D(l.$$.fragment,f),i=!0)},o(f){F(l.$$.fragment,f),i=!1},d(f){f&&N(e),ae(l),s=!1,ue(o)}}}function qt(t){let e,l,n,i;const s=t[48].selected,o=Ve(s,t,t[73],Lt),u=o||Bn(t);let r=!t[29]&&Rt(t);return{c(){e=h("li"),u&&u.c(),l=B(),r&&r.c(),a(e,"class",n=xe(t[16])+" svelte-18jo2l6"),a(e,"aria-selected","true")},m(f,_){I(f,e,_),u&&u.m(e,null),c(e,l),r&&r.m(e,null),i=!0},p(f,_){o?o.p&&(!i||_[0]&2|_[2]&2048)&&Ke(o,s,f,f[73],i?Ge(s,f[73],_,Mn):Ye(f[73]),Lt):u&&u.p&&(!i||_[0]&2)&&u.p(f,i?_:[-1,-1,-1]),f[29]?r&&(me(),F(r,1,1,()=>{r=null}),ge()):r?(r.p(f,_),_[0]&536870912&&D(r,1)):(r=Rt(f),r.c(),D(r,1),r.m(e,null)),(!i||_[0]&65536&&n!==(n=xe(f[16])+" svelte-18jo2l6"))&&a(e,"class",n)},i(f){i||(D(u,f),D(r),i=!0)},o(f){F(u,f),F(r),i=!1},d(f){f&&N(e),u&&u.d(f),r&&r.d()}}}function Nt(t){let e;const l=t[48].spinner,n=Ve(l,t,t[73],Dt),i=n||An();return{c(){i&&i.c()},m(s,o){i&&i.m(s,o),e=!0},p(s,o){n&&n.p&&(!e||o[2]&2048)&&Ke(n,l,s,s[73],e?Ge(l,s[73],o,Tn):Ye(s[73]),Dt)},i(s){e||(D(i,s),e=!0)},o(s){F(i,s),e=!1},d(s){i&&i.d(s)}}}function An(t){let e,l;return e=new cn({}),{c(){de(e.$$.fragment)},m(n,i){fe(e,n,i),l=!0},i(n){l||(D(e.$$.fragment,n),l=!0)},o(n){F(e.$$.fragment,n),l=!1},d(n){ae(e,n)}}}function En(t){let e,l,n,i=t[8]&&(t[8]>1||t[9])&&It(t),s=t[8]!==1&&t[1].length>1&&zt(t);return{c(){i&&i.c(),e=B(),s&&s.c(),l=Je()},m(o,u){i&&i.m(o,u),I(o,e,u),s&&s.m(o,u),I(o,l,u),n=!0},p(o,u){o[8]&&(o[8]>1||o[9])?i?(i.p(o,u),u[0]&768&&D(i,1)):(i=It(o),i.c(),D(i,1),i.m(e.parentNode,e)):i&&(me(),F(i,1,1,()=>{i=null}),ge()),o[8]!==1&&o[1].length>1?s?(s.p(o,u),u[0]&258&&D(s,1)):(s=zt(o),s.c(),D(s,1),s.m(l.parentNode,l)):s&&(me(),F(s,1,1,()=>{s=null}),ge())},i(o){n||(D(i),D(s),n=!0)},o(o){F(i),F(s),n=!1},d(o){i&&i.d(o),o&&N(e),s&&s.d(o),o&&N(l)}}}function Dn(t){let e;const l=t[48]["disabled-icon"],n=Ve(l,t,t[73],Et),i=n||Ln();return{c(){i&&i.c()},m(s,o){i&&i.m(s,o),e=!0},p(s,o){n&&n.p&&(!e||o[2]&2048)&&Ke(n,l,s,s[73],e?Ge(l,s[73],o,On):Ye(s[73]),Et)},i(s){e||(D(i,s),e=!0)},o(s){F(i,s),e=!1},d(s){i&&i.d(s)}}}function It(t){let e,l,n;function i(o){t[60](o)}let s={angle:20,$$slots:{default:[jn]},$$scope:{ctx:t}};return t[33]!==void 0&&(s.wiggle=t[33]),e=new Cn({props:s}),je.push(()=>ht(e,"wiggle",i)),{c(){de(e.$$.fragment)},m(o,u){fe(e,o,u),n=!0},p(o,u){const r={};u[0]&770|u[2]&2048&&(r.$$scope={dirty:u,ctx:o}),!l&&u[1]&4&&(l=!0,r.wiggle=o[33],ct(()=>l=!1)),e.$set(r)},i(o){n||(D(e.$$.fragment,o),n=!0)},o(o){F(e.$$.fragment,o),n=!1},d(o){ae(e,o)}}}function jn(t){var i,s;let e,l=((s=(i=t[9])==null?void 0:i.call(t,t[1].length,t[8]))!=null?s:t[8]>1?`${t[1].length}/${t[8]}`:"")+"",n;return{c(){e=h("span"),n=re(l),le(e,"padding","0 3pt"),a(e,"class","svelte-18jo2l6")},m(o,u){I(o,e,u),c(e,n)},p(o,u){var r,f;u[0]&770&&l!==(l=((f=(r=o[9])==null?void 0:r.call(o,o[1].length,o[8]))!=null?f:o[8]>1?`${o[1].length}/${o[8]}`:"")+"")&&be(n,l)},d(o){o&&N(e)}}}function zt(t){let e,l,n,i,s;return l=new il({props:{width:"15px"}}),{c(){e=h("button"),de(l.$$.fragment),a(e,"type","button"),a(e,"class","remove-all svelte-18jo2l6"),a(e,"title",t[22])},m(o,u){I(o,e,u),fe(l,e,null),n=!0,i||(s=[U(e,"mouseup",Me(t[41])),U(e,"keydown",t[42](t[41]))],i=!0)},p(o,u){(!n||u[0]&4194304)&&a(e,"title",o[22])},i(o){n||(D(l.$$.fragment,o),n=!0)},o(o){F(l.$$.fragment,o),n=!1},d(o){o&&N(e),ae(l),i=!1,ue(s)}}}function Ln(t){let e,l;return e=new kn({props:{width:"15px"}}),{c(){de(e.$$.fragment)},m(n,i){fe(e,n,i),l=!0},p:A,i(n){l||(D(e.$$.fragment,n),l=!0)},o(n){F(e.$$.fragment,n),l=!1},d(n){ae(e,n)}}}function Pt(t){let e;function l(s,o){return s[24]&&s[0]?qn:Rn}let n=l(t),i=n(t);return{c(){i.c(),e=Je()},m(s,o){i.m(s,o),I(s,e,o)},p(s,o){n===(n=l(s))&&i?i.p(s,o):(i.d(1),i=n(s),i&&(i.c(),i.m(e.parentNode,e)))},d(s){i.d(s),s&&N(e)}}}function Rn(t){let e,l;return{c(){e=h("span"),l=re(t[13]),a(e,"class","svelte-18jo2l6")},m(n,i){I(n,e,i),c(e,l)},p(n,i){i[0]&8192&&be(l,n[13])},d(n){n&&N(e)}}}function qn(t){let e,l,n,i,s;return{c(){e=h("li"),l=re(t[25]),n=B(),a(e,"title",t[25]),a(e,"aria-selected","false"),a(e,"class","svelte-18jo2l6"),te(e,"active",t[32])},m(o,u){I(o,e,u),c(e,l),c(e,n),i||(s=[U(e,"mousedown",Me(t[50])),U(e,"mouseup",Me(t[66])),U(e,"mouseover",t[67]),U(e,"focus",t[68]),U(e,"mouseout",t[69]),U(e,"blur",t[70])],i=!0)},p(o,u){u[0]&33554432&&be(l,o[25]),u[0]&33554432&&a(e,"title",o[25]),u[1]&2&&te(e,"active",o[32])},d(o){o&&N(e),i=!1,ue(s)}}}function Nn(t){let e=t[36](t[76])+"",l;return{c(){l=re(e)},m(n,i){I(n,l,i)},p(n,i){i[1]&16&&e!==(e=n[36](n[76])+"")&&be(l,e)},d(n){n&&N(l)}}}function Ut(t){let e,l,n,i,s,o,u;const r=t[48].option,f=Ve(r,t,t[73],At),_=f||Nn(t);function C(){return t[61](t[29],t[77])}function S(){return t[62](t[29],t[76])}function b(){return t[63](t[29],t[76])}return{c(){e=h("li"),_&&_.c(),l=B(),a(e,"title",n=t[29]?t[30]:t[34](t[77])&&t[79]||t[78]),a(e,"class",i=t[18]+" "+(t[80]?t[19]:"")+" svelte-18jo2l6"),a(e,"aria-selected","false"),te(e,"selected",t[34](t[77])),te(e,"active",t[80]),te(e,"disabled",t[29])},m(p,m){I(p,e,m),_&&_.m(e,null),c(e,l),s=!0,o||(u=[U(e,"mousedown",Me(t[49])),U(e,"mouseup",Me(C)),U(e,"mouseover",S),U(e,"focus",b),U(e,"mouseout",t[64]),U(e,"blur",t[65])],o=!0)},p(p,m){t=p,f?f.p&&(!s||m[1]&16|m[2]&2048)&&Ke(f,r,t,t[73],s?Ge(r,t[73],m,Sn):Ye(t[73]),At):_&&_.p&&(!s||m[1]&16)&&_.p(t,s?m:[-1,-1,-1]),(!s||m[1]&24&&n!==(n=t[29]?t[30]:t[34](t[77])&&t[79]||t[78]))&&a(e,"title",n),(!s||m[0]&786496|m[1]&16&&i!==(i=t[18]+" "+(t[80]?t[19]:"")+" svelte-18jo2l6"))&&a(e,"class",i),m[0]&786496|m[1]&24&&te(e,"selected",t[34](t[77])),m[0]&786496|m[1]&48&&te(e,"active",t[80]),m[0]&786496|m[1]&16&&te(e,"disabled",t[29])},i(p){s||(D(_,p),s=!0)},o(p){F(_,p),s=!1},d(p){p&&N(e),_&&_.d(p),o=!1,ue(u)}}}function In(t){let e,l,n,i,s,o,u,r,f,_,C,S,b,p,m,k,y,O,j,R,H,Q,K,V,L,E,z;i=new hn({props:{width:"15px",style:"min-width: 1em; padding: 0 1pt;"}});let w=t[1],q=[];for(let v=0;v<w.length;v+=1)q[v]=qt(jt(t,w,v));const g=v=>F(q[v],1,1,()=>{q[v]=null});let T=t[26]&&Nt(t);const W=[Dn,En],x=[];function ve(v,M){return v[29]?0:v[1].length>0?1:-1}~(k=ve(t))&&(y=x[k]=W[k](t));let ee=t[35],Y=[];for(let v=0;v<ee.length;v+=1)Y[v]=Ut(Bt(t,ee,v));const ne=v=>F(Y[v],1,1,()=>{Y[v]=null});let Z=null;return ee.length||(Z=Pt(t)),{c(){e=h("div"),l=h("input"),n=B(),de(i.$$.fragment),s=B(),o=h("ul");for(let v=0;v<q.length;v+=1)q[v].c();u=B(),r=h("li"),f=h("input"),p=B(),T&&T.c(),m=B(),y&&y.c(),O=B(),j=h("ul");for(let v=0;v<Y.length;v+=1)Y[v].c();Z&&Z.c(),l.required=t[27],a(l,"tabindex","-1"),a(l,"aria-hidden","true"),a(l,"aria-label","ignore this, used only to prevent form submission if select is required but empty"),a(l,"class","form-control svelte-18jo2l6"),a(f,"class",_=xe(t[20])+" svelte-18jo2l6"),a(f,"autocomplete",t[28]),a(f,"id",t[11]),a(f,"name",t[12]),f.disabled=t[29],a(f,"placeholder",C=t[2].length?"":t[10]),a(f,"aria-invalid",S=t[7]?"true":null),le(r,"display","contents"),a(r,"class","svelte-18jo2l6"),a(o,"class",b="selected "+t[15]+" svelte-18jo2l6"),a(j,"class",R="options "+t[17]+" svelte-18jo2l6"),te(j,"hidden",!t[3]),a(e,"aria-expanded",t[3]),a(e,"aria-multiselectable",H=t[8]===null||t[8]>1),a(e,"class",Q="multiselect "+t[14]+" svelte-18jo2l6"),a(e,"title",K=t[29]?t[30]:null),a(e,"aria-disabled",V=t[29]?"true":null),te(e,"disabled",t[29]),te(e,"single",t[8]===1),te(e,"open",t[3]),te(e,"invalid",t[7])},m(v,M){I(v,e,M),c(e,l),ce(l,t[31]),c(e,n),fe(i,e,null),c(e,s),c(e,o);for(let ie=0;ie<q.length;ie+=1)q[ie].m(o,null);c(o,u),c(o,r),c(r,f),t[56](f),ce(f,t[0]),c(e,p),T&&T.m(e,null),c(e,m),~k&&x[k].m(e,null),c(e,O),c(e,j);for(let ie=0;ie<Y.length;ie+=1)Y[ie].m(j,null);Z&&Z.m(j,null),t[71](e),L=!0,E||(z=[U(window,"click",t[51]),U(l,"input",t[52]),U(l,"invalid",t[53]),U(f,"input",t[57]),U(f,"mouseup",Ul(Me(t[58]))),U(f,"keydown",t[40]),U(f,"focus",t[59]),U(e,"mouseup",Me(t[72]))],E=!0)},p(v,M){if((!L||M[0]&134217728)&&(l.required=v[27]),M[1]&1&&l.value!==v[31]&&ce(l,v[31]),M[0]&539033602|M[1]&2208|M[2]&2048){w=v[1];let G;for(G=0;G<w.length;G+=1){const oe=jt(v,w,G);q[G]?(q[G].p(oe,M),D(q[G],1)):(q[G]=qt(oe),q[G].c(),D(q[G],1),q[G].m(o,u))}for(me(),G=w.length;G<q.length;G+=1)g(G);ge()}(!L||M[0]&1048576&&_!==(_=xe(v[20])+" svelte-18jo2l6"))&&a(f,"class",_),(!L||M[0]&268435456)&&a(f,"autocomplete",v[28]),(!L||M[0]&2048)&&a(f,"id",v[11]),(!L||M[0]&4096)&&a(f,"name",v[12]),(!L||M[0]&536870912)&&(f.disabled=v[29]),(!L||M[0]&1028&&C!==(C=v[2].length?"":v[10]))&&a(f,"placeholder",C),(!L||M[0]&128&&S!==(S=v[7]?"true":null))&&a(f,"aria-invalid",S),M[0]&1&&f.value!==v[0]&&ce(f,v[0]),(!L||M[0]&32768&&b!==(b="selected "+v[15]+" svelte-18jo2l6"))&&a(o,"class",b),v[26]?T?(T.p(v,M),M[0]&67108864&&D(T,1)):(T=Nt(v),T.c(),D(T,1),T.m(e,m)):T&&(me(),F(T,1,1,()=>{T=null}),ge());let ie=k;if(k=ve(v),k===ie?~k&&x[k].p(v,M):(y&&(me(),F(x[ie],1,1,()=>{x[ie]=null}),ge()),~k?(y=x[k],y?y.p(v,M):(y=x[k]=W[k](v),y.c()),D(y,1),y.m(e,O)):y=null),M[0]&51126337|M[1]&250|M[2]&2048){ee=v[35];let G;for(G=0;G<ee.length;G+=1){const oe=Bt(v,ee,G);Y[G]?(Y[G].p(oe,M),D(Y[G],1)):(Y[G]=Ut(oe),Y[G].c(),D(Y[G],1),Y[G].m(j,null))}for(me(),G=ee.length;G<Y.length;G+=1)ne(G);ge(),!ee.length&&Z?Z.p(v,M):ee.length?Z&&(Z.d(1),Z=null):(Z=Pt(v),Z.c(),Z.m(j,null))}(!L||M[0]&131072&&R!==(R="options "+v[17]+" svelte-18jo2l6"))&&a(j,"class",R),M[0]&131080&&te(j,"hidden",!v[3]),(!L||M[0]&8)&&a(e,"aria-expanded",v[3]),(!L||M[0]&256&&H!==(H=v[8]===null||v[8]>1))&&a(e,"aria-multiselectable",H),(!L||M[0]&16384&&Q!==(Q="multiselect "+v[14]+" svelte-18jo2l6"))&&a(e,"class",Q),(!L||M[0]&1610612736&&K!==(K=v[29]?v[30]:null))&&a(e,"title",K),(!L||M[0]&536870912&&V!==(V=v[29]?"true":null))&&a(e,"aria-disabled",V),M[0]&536887296&&te(e,"disabled",v[29]),M[0]&16640&&te(e,"single",v[8]===1),M[0]&16392&&te(e,"open",v[3]),M[0]&16512&&te(e,"invalid",v[7])},i(v){if(!L){D(i.$$.fragment,v);for(let M=0;M<w.length;M+=1)D(q[M]);D(T),D(y);for(let M=0;M<ee.length;M+=1)D(Y[M]);L=!0}},o(v){F(i.$$.fragment,v),q=q.filter(Boolean);for(let M=0;M<q.length;M+=1)F(q[M]);F(T),F(y),Y=Y.filter(Boolean);for(let M=0;M<Y.length;M+=1)F(Y[M]);L=!1},d(v){v&&N(e),ae(i),Te(q,v),t[56](null),T&&T.d(),~k&&x[k].d(),Te(Y,v),Z&&Z.d(),t[71](null),E=!1,ue(z)}}}function zn(t,e,l){let n,i,s,{$$slots:o={},$$scope:u}=e,{searchText:r=""}=e,{showOptions:f=!1}=e,{maxSelect:_=null}=e,{maxSelectMsg:C=null}=e,{disabled:S=!1}=e,{disabledTitle:b="This field is disabled"}=e,{options:p}=e,{selected:m=[]}=e,{selectedLabels:k=[]}=e,{selectedValues:y=[]}=e,{input:O=null}=e,{outerDiv:j=null}=e,{placeholder:R=void 0}=e,{id:H=void 0}=e,{name:Q=H}=e,{noOptionsMsg:K="No matching options"}=e,{activeOption:V=null}=e,{filterFunc:L=(d,J)=>J?`${X(d)}`.toLowerCase().includes(J.toLowerCase()):!0}=e,{outerDivClass:E=""}=e,{ulSelectedClass:z=""}=e,{liSelectedClass:w=""}=e,{ulOptionsClass:q=""}=e,{liOptionClass:g=""}=e,{liActiveOptionClass:T=""}=e,{inputClass:W=""}=e,{removeBtnTitle:x="Remove"}=e,{removeAllTitle:ve="Remove all"}=e,{defaultDisabledTitle:ee="This option is disabled"}=e,{allowUserOptions:Y=!1}=e,{addOptionMsg:ne="Create this option..."}=e,{autoScroll:Z=!0}=e,{loading:v=!1}=e,{required:M=!1}=e,{autocomplete:ie="off"}=e,{invalid:G=!1}=e,{sortSelected:oe=!1}=e;_!==null&&_<1&&console.error(`maxSelect must be null or positive integer, got ${_}`),(p==null?void 0:p.length)>0||console.error("MultiSelect is missing options"),Array.isArray(m)||console.error("selected prop must be an array");const $=Gl();let P=!1;const X=d=>d instanceof Object?d.label:d,se=d=>{var J;return d instanceof Object?(J=d.value)!=null?J:d.label:d};let Be=!1;function ze(d){if(_&&_>1&&m.length>=_&&l(33,Be=!0),_===null||_===1||m.length<_){let J=p.find(we=>X(we)===d);if(!J&&[!0,"append"].includes(Y)&&r.length>0&&(J={label:r,value:r},Y==="append"&&l(43,p=[...p,J])),l(0,r=""),!J){console.error(`MultiSelect: option with label ${d} not found`);return}_===1?l(1,m=[J]):(l(1,m=[...m,J]),oe===!0?l(1,m=m.sort((we,Ae)=>{const[Rl,ql]=[X(we),X(Ae)];return`${Rl}`.localeCompare(`${ql}`)})):typeof oe=="function"&&l(1,m=m.sort(oe))),m.length===_?Oe(!1):O==null||O.focus(),$("add",{option:J}),$("change",{option:J,type:"add"})}}function Le(d){var we;if(m.length===0)return;m.splice(k.lastIndexOf(d),1),l(1,m);const J=(we=p.find(Ae=>X(Ae)===d))!=null?we:Y&&{label:d,value:d};if(!J)return console.error(`MultiSelect: option with label ${d} not found`);$("remove",{option:J}),$("change",{option:J,type:"remove"})}function Oe(d){S||(l(3,f=d),d?(O==null||O.focus(),$("focus")):(O==null||O.blur(),l(6,V=null),$("blur")))}async function rl(d){if(d.key==="Escape"||d.key==="Tab")Oe(!1),l(0,r="");else if(d.key==="Enter")if(d.preventDefault(),V){const J=X(V);k.includes(J)?Le(J):ze(J),l(0,r="")}else Y&&r.length>0?ze(r):Oe(!0);else if(["ArrowDown","ArrowUp"].includes(d.key)){if(V===null&&i.length>0){l(6,V=i[0]);return}else if(Y&&r.length>0){l(32,P=!P);return}else if(V===null)return;const J=d.key==="ArrowUp"?-1:1,we=i.indexOf(V)+J;if(we<0?l(6,V=i[i.length-1]):we===i.length?l(6,V=i[0]):l(6,V=i[we]),Z){await Kl();const Ae=document.querySelector("ul.options > li.active");Ae==null||Ae.scrollIntoViewIfNeeded()}}else d.key==="Backspace"&&k.length>0&&!r&&Le(k.at(-1))}function ul(){$("removeAll",{options:m}),$("change",{options:m,type:"removeAll"}),l(1,m=[]),l(0,r="")}const fl=d=>J=>{["Enter","Space"].includes(J.code)&&(J.preventDefault(),d())};function al(d){kt.call(this,t,d)}function cl(d){kt.call(this,t,d)}const dl=d=>{j&&!j.contains(d.target)&&Oe(!1)};function _l(){n=this.value,l(31,n),l(44,y),l(1,m)}const hl=()=>l(7,G=!0),ml=d=>Le(X(d)),gl=d=>Le(X(d));function bl(d){je[d?"unshift":"push"](()=>{O=d,l(4,O)})}function pl(){r=this.value,l(0,r)}const kl=()=>Oe(!0),vl=()=>Oe(!0);function wl(d){Be=d,l(33,Be)}const yl=(d,J)=>{d||(s(J)?Le(J):ze(J))},Cl=(d,J)=>{d||l(6,V=J)},Sl=(d,J)=>{d||l(6,V=J)},Ol=()=>l(6,V=null),Tl=()=>l(6,V=null),Ml=()=>ze(r),Bl=()=>l(32,P=!0),Al=()=>l(32,P=!0),El=()=>l(32,P=!1),Dl=()=>l(32,P=!1);function jl(d){je[d?"unshift":"push"](()=>{j=d,l(5,j)})}const Ll=()=>Oe(!0);return t.$$set=d=>{"searchText"in d&&l(0,r=d.searchText),"showOptions"in d&&l(3,f=d.showOptions),"maxSelect"in d&&l(8,_=d.maxSelect),"maxSelectMsg"in d&&l(9,C=d.maxSelectMsg),"disabled"in d&&l(29,S=d.disabled),"disabledTitle"in d&&l(30,b=d.disabledTitle),"options"in d&&l(43,p=d.options),"selected"in d&&l(1,m=d.selected),"selectedLabels"in d&&l(2,k=d.selectedLabels),"selectedValues"in d&&l(44,y=d.selectedValues),"input"in d&&l(4,O=d.input),"outerDiv"in d&&l(5,j=d.outerDiv),"placeholder"in d&&l(10,R=d.placeholder),"id"in d&&l(11,H=d.id),"name"in d&&l(12,Q=d.name),"noOptionsMsg"in d&&l(13,K=d.noOptionsMsg),"activeOption"in d&&l(6,V=d.activeOption),"filterFunc"in d&&l(45,L=d.filterFunc),"outerDivClass"in d&&l(14,E=d.outerDivClass),"ulSelectedClass"in d&&l(15,z=d.ulSelectedClass),"liSelectedClass"in d&&l(16,w=d.liSelectedClass),"ulOptionsClass"in d&&l(17,q=d.ulOptionsClass),"liOptionClass"in d&&l(18,g=d.liOptionClass),"liActiveOptionClass"in d&&l(19,T=d.liActiveOptionClass),"inputClass"in d&&l(20,W=d.inputClass),"removeBtnTitle"in d&&l(21,x=d.removeBtnTitle),"removeAllTitle"in d&&l(22,ve=d.removeAllTitle),"defaultDisabledTitle"in d&&l(23,ee=d.defaultDisabledTitle),"allowUserOptions"in d&&l(24,Y=d.allowUserOptions),"addOptionMsg"in d&&l(25,ne=d.addOptionMsg),"autoScroll"in d&&l(46,Z=d.autoScroll),"loading"in d&&l(26,v=d.loading),"required"in d&&l(27,M=d.required),"autocomplete"in d&&l(28,ie=d.autocomplete),"invalid"in d&&l(7,G=d.invalid),"sortSelected"in d&&l(47,oe=d.sortSelected),"$$scope"in d&&l(73,u=d.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&2&&l(2,k=m.map(X)),t.$$.dirty[0]&2&&l(44,y=m.map(se)),t.$$.dirty[1]&8192&&l(31,n=y.join(",")),t.$$.dirty[1]&1&&n&&l(7,G=!1),t.$$.dirty[0]&5|t.$$.dirty[1]&20480&&l(35,i=p.filter(d=>L(d,r)&&!(d instanceof Object&&d.disabled)&&!k.includes(X(d)))),t.$$.dirty[0]&4&&l(34,s=d=>k.includes(d))},[r,m,k,f,O,j,V,G,_,C,R,H,Q,K,E,z,w,q,g,T,W,x,ve,ee,Y,ne,v,M,ie,S,b,n,P,Be,s,i,X,ze,Le,Oe,rl,ul,fl,p,y,L,Z,oe,o,al,cl,dl,_l,hl,ml,gl,bl,pl,kl,vl,wl,yl,Cl,Sl,Ol,Tl,Ml,Bl,Al,El,Dl,jl,Ll,u]}class ol extends ke{constructor(e){super(),pe(this,e,zn,In,he,{searchText:0,showOptions:3,maxSelect:8,maxSelectMsg:9,disabled:29,disabledTitle:30,options:43,selected:1,selectedLabels:2,selectedValues:44,input:4,outerDiv:5,placeholder:10,id:11,name:12,noOptionsMsg:13,activeOption:6,filterFunc:45,outerDivClass:14,ulSelectedClass:15,liSelectedClass:16,ulOptionsClass:17,liOptionClass:18,liActiveOptionClass:19,inputClass:20,removeBtnTitle:21,removeAllTitle:22,defaultDisabledTitle:23,allowUserOptions:24,addOptionMsg:25,autoScroll:46,loading:26,required:27,autocomplete:28,invalid:7,sortSelected:47},null,[-1,-1,-1])}}function Pn(t){return{c:A,m:A,p:A,i:A,o:A,d:A}}function Un(t){let e,l,n;function i(o){t[7](o)}let s={inputClass:"input-like",outerDivClass:"color-fix",allowUserOptions:!0,addOptionMsg:"+ Create new tag",options:t[11].map(Yn)};return t[3]!==void 0&&(s.selected=t[3]),e=new ol({props:s}),je.push(()=>ht(e,"selected",i)),{c(){de(e.$$.fragment)},m(o,u){fe(e,o,u),n=!0},p(o,u){const r={};!l&&u&8&&(l=!0,r.selected=o[3],ct(()=>l=!1)),e.$set(r)},i(o){n||(D(e.$$.fragment,o),n=!0)},o(o){F(e.$$.fragment,o),n=!1},d(o){ae(e,o)}}}function Fn(t){return{c:A,m:A,p:A,i:A,o:A,d:A}}function Hn(t){return{c:A,m:A,p:A,i:A,o:A,d:A}}function Vn(t){let e,l,n;function i(o){t[8](o)}let s={inputClass:"input-like",outerDivClass:"color-fix",options:t[10].map(Jn)};return t[4]!==void 0&&(s.selected=t[4]),e=new ol({props:s}),je.push(()=>ht(e,"selected",i)),{c(){de(e.$$.fragment)},m(o,u){fe(e,o,u),n=!0},p(o,u){const r={};!l&&u&16&&(l=!0,r.selected=o[4],ct(()=>l=!1)),e.$set(r)},i(o){n||(D(e.$$.fragment,o),n=!0)},o(o){F(e.$$.fragment,o),n=!1},d(o){ae(e,o)}}}function Gn(t){return{c:A,m:A,p:A,i:A,o:A,d:A}}function Ft(t){let e,l;return{c(){e=h("span"),l=re(t[1]),a(e,"class","m-b-1 red")},m(n,i){I(n,e,i),c(e,l)},p(n,i){i&2&&be(l,n[1])},d(n){n&&N(e)}}}function Kn(t){let e,l,n,i,s,o,u,r,f,_,C,S,b,p,m,k,y,O,j,R=t[0]==="SUBMITTING"?"Loading":"Add",H,Q,K,V,L,E={ctx:t,current:null,token:null,hasCatch:!1,pending:Fn,then:Un,catch:Pn,value:11,blocks:[,,,]};ot(Se("/tags"),E);let z={ctx:t,current:null,token:null,hasCatch:!1,pending:Gn,then:Vn,catch:Hn,value:10,blocks:[,,,]};ot(Se("/folders"),z);let w=t[0]==="ERROR"&&Ft(t);return{c(){e=h("dialog"),l=h("header"),l.innerHTML="<h2>Add new bookmark</h2>",n=B(),i=h("div"),s=h("div"),o=h("label"),o.innerHTML='<strong>URL</strong><span class="red">*</span>',u=B(),r=h("input"),f=B(),_=h("div"),C=h("label"),C.innerHTML="<strong>Tags</strong>",S=B(),E.block.c(),b=B(),p=h("div"),m=h("label"),m.innerHTML="<strong>Folder</strong>",k=B(),z.block.c(),y=B(),w&&w.c(),O=B(),j=h("button"),H=re(R),a(o,"for","url"),a(r,"type","url"),a(r,"placeholder","Add new URL"),a(r,"name","url"),a(r,"id","url"),r.required=!0,a(s,"class","col m-b-1"),a(C,"for","tags"),a(_,"class","col m-b-1"),a(m,"for","folders"),a(p,"class","col m-b-1"),a(i,"class","col"),a(j,"class","w-full"),a(j,"type","submit"),j.disabled=Q=t[0]==="SUBMITTING",le(j,"margin","3em 0 1em 0"),a(e,"id","add-bookmark-modal")},m(q,g){I(q,e,g),c(e,l),c(e,n),c(e,i),c(i,s),c(s,o),c(s,u),c(s,r),ce(r,t[2]),c(i,f),c(i,_),c(_,C),c(_,S),E.block.m(_,E.anchor=null),E.mount=()=>_,E.anchor=null,c(i,b),c(i,p),c(p,m),c(p,k),z.block.m(p,z.anchor=null),z.mount=()=>p,z.anchor=null,c(i,y),w&&w.m(i,null),c(e,O),c(e,j),c(j,H),K=!0,V||(L=[U(r,"input",t[6]),U(j,"click",t[5])],V=!0)},p(q,[g]){t=q,g&4&&ce(r,t[2]),st(E,t,g),st(z,t,g),t[0]==="ERROR"?w?w.p(t,g):(w=Ft(t),w.c(),w.m(i,null)):w&&(w.d(1),w=null),(!K||g&1)&&R!==(R=t[0]==="SUBMITTING"?"Loading":"Add")&&be(H,R),(!K||g&1&&Q!==(Q=t[0]==="SUBMITTING"))&&(j.disabled=Q)},i(q){K||(D(E.block),D(z.block),K=!0)},o(q){for(let g=0;g<3;g+=1){const T=E.blocks[g];F(T)}for(let g=0;g<3;g+=1){const T=z.blocks[g];F(T)}K=!1},d(q){q&&N(e),E.block.d(),E.token=null,E=null,z.block.d(),z.token=null,z=null,w&&w.d(),V=!1,ue(L)}}}const Yn=({id:t,name:e})=>({label:e,value:t}),Jn=({id:t,name:e})=>({label:e,value:t});function Wn(t,e,l){let n,i,s,o=[],u=[];const r=b=>b.label==b.value&&typeof b.value=="string",f=async()=>{l(0,n="SUBMITTING");const b=o.filter(r);if(b.length>0)try{const m=await Se("/tags/bulk","POST",{names:b.map(({value:k})=>k)});l(3,o=[...o.filter(k=>!r(k)),...m.map(({id:k,name:y})=>({label:y,value:k}))])}catch{l(0,n="ERROR"),l(1,i="An error occurred");return}const p={url:s,tags:o.map(({value:m})=>m),folders:u.map(({value:m})=>m)};try{const m=await Se("/bookmarks","POST",p);l(0,n="SUCCESS"),Ue.add(m),document.getElementById("add-bookmark-modal").close()}catch{l(0,n="ERROR"),l(1,i="An error occurred")}};function _(){s=this.value,l(2,s)}function C(b){o=b,l(3,o)}function S(b){u=b,l(4,u)}return[n,i,s,o,u,f,_,C,S]}class Qn extends ke{constructor(e){super(),pe(this,e,Wn,Kn,he,{})}}function Ht(t,e,l){const n=t.slice();return n[10]=e[l],n}function Xn(t){let e,l,n,i,s,o,u=t[0]&&Vt(t);return{c(){e=h("span"),e.textContent="\u25B6",l=B(),u&&u.c(),n=Je(),a(e,"class","arrow svelte-1dfpat7"),te(e,"arrowDown",t[1])},m(r,f){I(r,e,f),I(r,l,f),u&&u.m(r,f),I(r,n,f),i=!0,s||(o=U(e,"click",t[6]),s=!0)},p(r,f){f&2&&te(e,"arrowDown",r[1]),r[0]?u?(u.p(r,f),f&1&&D(u,1)):(u=Vt(r),u.c(),D(u,1),u.m(n.parentNode,n)):u&&(me(),F(u,1,1,()=>{u=null}),ge())},i(r){i||(D(u),i=!0)},o(r){F(u),i=!1},d(r){r&&N(e),r&&N(l),u&&u.d(r),r&&N(n),s=!1,o()}}}function Vt(t){let e,l,n=t[5],i=[];for(let o=0;o<n.length;o+=1)i[o]=Gt(Ht(t,n,o));const s=o=>F(i[o],1,1,()=>{i[o]=null});return{c(){for(let o=0;o<i.length;o+=1)i[o].c();e=Je()},m(o,u){for(let r=0;r<i.length;r+=1)i[r].m(o,u);I(o,e,u),l=!0},p(o,u){if(u&32){n=o[5];let r;for(r=0;r<n.length;r+=1){const f=Ht(o,n,r);i[r]?(i[r].p(f,u),D(i[r],1)):(i[r]=Gt(f),i[r].c(),D(i[r],1),i[r].m(e.parentNode,e))}for(me(),r=n.length;r<i.length;r+=1)s(r);ge()}},i(o){if(!l){for(let u=0;u<n.length;u+=1)D(i[u]);l=!0}},o(o){i=i.filter(Boolean);for(let u=0;u<i.length;u+=1)F(i[u]);l=!1},d(o){Te(i,o),o&&N(e)}}}function Gt(t){let e,l;return e=new sl({props:{tree:t[10]}}),{c(){de(e.$$.fragment)},m(n,i){fe(e,n,i),l=!0},p:A,i(n){l||(D(e.$$.fragment,n),l=!0)},o(n){F(e.$$.fragment,n),l=!1},d(n){ae(e,n)}}}function Zn(t){let e,l,n,i,s,o,u,r,f,_,C,S=t[5]&&Xn(t);return{c(){e=h("ul"),l=h("li"),n=h("span"),i=h("input"),s=B(),o=h("label"),u=re(t[3]),r=B(),S&&S.c(),a(i,"type","checkbox"),a(i,"name",t[4]),a(i,"id",t[4]),a(o,"for",t[4]),le(o,"cursor","pointer"),a(o,"class","svelte-1dfpat7"),a(e,"class","svelte-1dfpat7")},m(b,p){I(b,e,p),c(e,l),c(l,n),c(n,i),ce(i,t[2].folder),c(n,s),c(n,o),c(o,u),c(n,r),S&&S.m(n,null),f=!0,_||(C=[U(i,"change",t[8]),U(i,"change",t[9])],_=!0)},p(b,[p]){p&4&&ce(i,b[2].folder),b[5]&&S.p(b,p)},i(b){f||(D(S),f=!0)},o(b){F(S),f=!1},d(b){b&&N(e),S&&S.d(),_=!1,ue(C)}}}const Kt={};function xn(t,e,l){let n,i;Fe(t,_e,b=>l(2,i=b));let{tree:s}=e;const{name:o,id:u,children:r}=s;let f=Kt[u]||!0;const _=()=>{l(0,f=Kt[u]=!f)};function C(){i.folder=this.value,_e.set(i)}const S=b=>{b.target.checked?$e(_e,i.folder=u,i):$e(_e,i.folder=null,i)};return t.$$set=b=>{"tree"in b&&l(7,s=b.tree)},t.$$.update=()=>{t.$$.dirty&1&&l(1,n=f)},[f,n,i,o,u,r,_,s,C,S]}class sl extends ke{constructor(e){super(),pe(this,e,xn,Zn,he,{tree:7})}}function Yt(t,e,l){const n=t.slice();return n[3]=e[l],n}function Jt(t,e,l){const n=t.slice();return n[7]=e[l],n}function $n(t){return{c:A,m:A,p:A,i:A,o:A,d:A}}function ei(t){let e,l,n=t[6],i=[];for(let o=0;o<n.length;o+=1)i[o]=Wt(Jt(t,n,o));const s=o=>F(i[o],1,1,()=>{i[o]=null});return{c(){for(let o=0;o<i.length;o+=1)i[o].c();e=Je()},m(o,u){for(let r=0;r<i.length;r+=1)i[r].m(o,u);I(o,e,u),l=!0},p(o,u){if(u&0){n=o[6];let r;for(r=0;r<n.length;r+=1){const f=Jt(o,n,r);i[r]?(i[r].p(f,u),D(i[r],1)):(i[r]=Wt(f),i[r].c(),D(i[r],1),i[r].m(e.parentNode,e))}for(me(),r=n.length;r<i.length;r+=1)s(r);ge()}},i(o){if(!l){for(let u=0;u<n.length;u+=1)D(i[u]);l=!0}},o(o){i=i.filter(Boolean);for(let u=0;u<i.length;u+=1)F(i[u]);l=!1},d(o){Te(i,o),o&&N(e)}}}function Wt(t){let e,l;return e=new sl({props:{tree:t[7]}}),{c(){de(e.$$.fragment)},m(n,i){fe(e,n,i),l=!0},p:A,i(n){l||(D(e.$$.fragment,n),l=!0)},o(n){F(e.$$.fragment,n),l=!1},d(n){ae(e,n)}}}function ti(t){return{c:A,m:A,p:A,i:A,o:A,d:A}}function Qt(t){let e,l;return e=new tn({props:{bookmark:t[3]}}),{c(){de(e.$$.fragment)},m(n,i){fe(e,n,i),l=!0},p(n,i){const s={};i&1&&(s.bookmark=n[3]),e.$set(s)},i(n){l||(D(e.$$.fragment,n),l=!0)},o(n){F(e.$$.fragment,n),l=!1},d(n){ae(e,n)}}}function li(t){let e,l,n,i,s,o,u,r,f,_,C,S,b,p,m,k,y,O,j,R,H,Q,K,V,L,E={ctx:t,current:null,token:null,hasCatch:!1,pending:ti,then:ei,catch:$n,value:6,blocks:[,,,]};ot(Se("/folders/tree"),E);let z=t[0],w=[];for(let g=0;g<z.length;g+=1)w[g]=Qt(Yt(t,z,g));const q=g=>F(w[g],1,1,()=>{w[g]=null});return O=new on({}),R=new Qn({}),Q=new un({}),{c(){e=h("nav"),l=h("div"),n=h("h1"),n.textContent="Rengoku",i=B(),s=h("button"),s.textContent="+ Add Bookmark",o=B(),u=h("hr"),r=B(),f=h("aside"),_=h("h2"),_.textContent="Folders",C=B(),S=h("hr"),b=B(),E.block.c(),p=B(),m=h("main");for(let g=0;g<w.length;g+=1)w[g].c();k=B(),y=h("aside"),de(O.$$.fragment),j=B(),de(R.$$.fragment),H=B(),de(Q.$$.fragment),a(s,"class","m-l-auto"),a(l,"class","row"),a(f,"id","folders"),a(y,"id","filters")},m(g,T){I(g,e,T),c(e,l),c(l,n),c(l,i),c(l,s),c(e,o),c(e,u),I(g,r,T),I(g,f,T),c(f,_),c(f,C),c(f,S),c(f,b),E.block.m(f,E.anchor=null),E.mount=()=>f,E.anchor=null,I(g,p,T),I(g,m,T);for(let W=0;W<w.length;W+=1)w[W].m(m,null);I(g,k,T),I(g,y,T),fe(O,y,null),I(g,j,T),fe(R,g,T),I(g,H,T),fe(Q,g,T),K=!0,V||(L=U(s,"click",t[2]),V=!0)},p(g,[T]){if(t=g,st(E,t,T),T&1){z=t[0];let W;for(W=0;W<z.length;W+=1){const x=Yt(t,z,W);w[W]?(w[W].p(x,T),D(w[W],1)):(w[W]=Qt(x),w[W].c(),D(w[W],1),w[W].m(m,null))}for(me(),W=z.length;W<w.length;W+=1)q(W);ge()}},i(g){if(!K){D(E.block);for(let T=0;T<z.length;T+=1)D(w[T]);D(O.$$.fragment,g),D(R.$$.fragment,g),D(Q.$$.fragment,g),K=!0}},o(g){for(let T=0;T<3;T+=1){const W=E.blocks[T];F(W)}w=w.filter(Boolean);for(let T=0;T<w.length;T+=1)F(w[T]);F(O.$$.fragment,g),F(R.$$.fragment,g),F(Q.$$.fragment,g),K=!1},d(g){g&&N(e),g&&N(r),g&&N(f),E.block.d(),E.token=null,E=null,g&&N(p),g&&N(m),Te(w,g),g&&N(k),g&&N(y),ae(O),g&&N(j),ae(R,g),g&&N(H),ae(Q,g),V=!1,L()}}}function ni(t,e,l){let n,i;Fe(t,Zl,o=>l(1,n=o)),Fe(t,Ue,o=>l(0,i=o)),at(()=>Ue.fetch(n));const s=()=>{document.getElementById("add-bookmark-modal").showModal()};return t.$$.update=()=>{t.$$.dirty&2&&Ue.fetch(n)},[i,n,s]}class ii extends ke{constructor(e){super(),pe(this,e,ni,li,he,{})}}new ii({target:document.body});
